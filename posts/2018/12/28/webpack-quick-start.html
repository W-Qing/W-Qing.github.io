<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Webpack快速入门 | ☀️W-Qing</title>
    <meta name="description" content="虽然在项目中也经常使用Webpack，但是自己没有认真梳理过它的用法，写篇文章记录下。">
    <link rel="shortcut icon" href="/img/favicon-32.ico">
    
    <link rel="preload" href="/assets/css/1.styles.8681790c.css" as="style"><link rel="preload" href="/assets/js/vendor.2.8681790c.js" as="script"><link rel="preload" href="/assets/js/vendor.1.d0cf3ae5.js" as="script"><link rel="preload" href="/assets/css/0.styles.6b1a4519.css" as="style"><link rel="preload" href="/assets/js/vendor.0.6b1a4519.js" as="script"><link rel="preload" href="/assets/js/app.a5059352.js" as="script"><link rel="preload" href="/assets/js/26.6a17249a.js" as="script"><link rel="prefetch" href="/assets/css/4.styles.2f04305e.css"><link rel="prefetch" href="/assets/css/5.styles.89162a5d.css"><link rel="prefetch" href="/assets/css/6.styles.99a56a85.css"><link rel="prefetch" href="/assets/css/7.styles.53d3c094.css"><link rel="prefetch" href="/assets/js/10.ba35610d.js"><link rel="prefetch" href="/assets/js/11.89dc6fd2.js"><link rel="prefetch" href="/assets/js/12.af9a49fe.js"><link rel="prefetch" href="/assets/js/13.12238301.js"><link rel="prefetch" href="/assets/js/14.874bbe6f.js"><link rel="prefetch" href="/assets/js/15.70e53660.js"><link rel="prefetch" href="/assets/js/16.702d2711.js"><link rel="prefetch" href="/assets/js/17.9ee8bb80.js"><link rel="prefetch" href="/assets/js/18.16a874e3.js"><link rel="prefetch" href="/assets/js/19.1f0fe006.js"><link rel="prefetch" href="/assets/js/20.1c173acf.js"><link rel="prefetch" href="/assets/js/21.a65fd53c.js"><link rel="prefetch" href="/assets/js/22.817c26f4.js"><link rel="prefetch" href="/assets/js/23.7d8ddf80.js"><link rel="prefetch" href="/assets/js/24.719ebfd1.js"><link rel="prefetch" href="/assets/js/25.b68f41ab.js"><link rel="prefetch" href="/assets/js/27.8e7e4ae8.js"><link rel="prefetch" href="/assets/js/28.0ede4f7f.js"><link rel="prefetch" href="/assets/js/29.503b4d2b.js"><link rel="prefetch" href="/assets/js/30.38ae75d9.js"><link rel="prefetch" href="/assets/js/4.2f04305e.js"><link rel="prefetch" href="/assets/js/5.89162a5d.js"><link rel="prefetch" href="/assets/js/6.99a56a85.js"><link rel="prefetch" href="/assets/js/7.53d3c094.js"><link rel="prefetch" href="/assets/js/8.cec7f5a5.js"><link rel="prefetch" href="/assets/js/9.e86e8d29.js">
    <link rel="stylesheet" href="/assets/css/1.styles.8681790c.css"><link rel="stylesheet" href="/assets/css/0.styles.6b1a4519.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div id="vuepress-theme-meteorlxy"><header class="header" style="background-size:cover;background-repeat:no-repeat;background-position:center;background-attachment:scroll;background-image:url(/background/header.jpg);" data-v-0539f1bd><div data-v-39c72c19 data-v-0539f1bd><nav class="navbar" data-v-39c72c19><div class="container" data-v-39c72c19><a href="/" class="router-link-active" data-v-39c72c19><span class="navbar-site-name" data-v-39c72c19>
          ☀️W-Qing
        </span></a> <div class="navbar-toggler" data-v-39c72c19><svg class="icon" style="font-size:1.2em;" data-v-39c72c19 data-v-39c72c19><title data-v-39c72c19 data-v-39c72c19>menu</title><use xlink:href="#icon-menu" data-v-39c72c19 data-v-39c72c19></use></svg></div> <div class="navbar-links" data-v-39c72c19><a href="/" class="navbar-link" data-v-39c72c19>
            Home
          </a><a href="/posts/" class="navbar-link router-link-active" data-v-39c72c19>
            Posts
          </a><a href="/life" class="navbar-link" data-v-39c72c19>
            Life
          </a><a href="/about/" class="navbar-link" data-v-39c72c19>
            About
          </a></div></div></nav> <div class="navbar-holder" style="display:none;" data-v-39c72c19></div></div> <div class="banner" data-v-98d6aa8c data-v-0539f1bd data-v-0539f1bd><div class="container" data-v-98d6aa8c><div class="center" data-v-98d6aa8c><h1 data-v-98d6aa8c data-v-0539f1bd>
          Webpack快速入门
        </h1></div></div></div></header> <div class="container clearfix show-aside" data-v-6cd81e6a data-v-6cd81e6a><main class="main" data-v-6cd81e6a><div class="post" data-v-6cd81e6a data-v-6cd81e6a><section class="post-meta main-div" data-v-4e23451f><section class="post-date clearfix" data-v-4e23451f><span class="create-date" data-v-4e23451f>
      发布时间 : 2018-12-28
    </span> <!----></section> <section class="post-links" data-v-4e23451f><a href="/posts/2018/09/11/group-arr-data-by-item-attribute.html" class="post-link" data-v-4e23451f>
      上一篇 : 将数组内容按元素属性进行重新分组
    </a> <a href="/posts/2019/03/20/deploying-to-github-pages-using-circle-ci-2-0.html" class="post-link" data-v-4e23451f>
      下一篇 : 利用Circle CI2.0自动化部署Github Pages
    </a></section></section> <article class="main-div"><div class="post-content content content__default"><h2 id="什么是-webpack？"><a href="#什么是-webpack？" aria-hidden="true" class="header-anchor">#</a> 什么是 Webpack？</h2> <p>自从出现前端模块化以后，我们就可以将原本是一坨的代码分离到一个个的模块中。但是由此引发了一个问题，每个 JS 文件都需要浏览器通过网络请求向服务器去获取，这样会导致页面加载速度变慢。</p> <p>Webpack 最主要的目的就是为了解决这个问题，将项目中所有应用的文件和模块打包成一个或多个大文件。官网的图片就很好的诠释了这个事情：👇</p> <p><img src="/articleImg/webpack.png" alt="webpack"></p> <p>🗿<strong>WebPack 是一个现代 JavaScript 应用程序的静态模块打包器(module bundler)：</strong></p> <p>它会分析你的项目结构，找到 JavaScript 模块以及其它的一些浏览器不能直接运行的扩展语言(如 ES6、TypeScript、Sass 等)，将其转换和打包为合适的格式后供浏览器使用。</p> <h2 id="webpack-有什么作用？"><a href="#webpack-有什么作用？" aria-hidden="true" class="header-anchor">#</a> Webpack 有什么作用？</h2> <p>当 webpack 处理应用程序时，它会递归地构建一个依赖关系图(dependency graph)，其中包含应用程序需要的每个模块，然后将所有这些模块打包成一个或多个 bundle。</p> <p><strong>构建</strong>就是把源代码转换成发布到线上可执行的 JavaScript、CSS、HTML 代码，包括以下内容：</p> <ul><li><strong>代码转换</strong>：TypeScript 编译成 JavaScript、SCSS 编译成 CSS 等</li> <li><strong>文件优化</strong>：压缩 JavaScript、CSS、HTML 代码，压缩合并图片等</li> <li><strong>代码分割</strong>：提取多个页面的公共代码、提取首屏不需要执行部分的代码让其异步加载</li> <li><strong>模块合并</strong>：在采用模块化的项目有很多模块和文件，需要构建功能把模块分类合并成一个文件</li> <li><strong>自动刷新</strong>：监听本地源代码的变化，自动构建，刷新浏览器</li> <li><strong>代码校验</strong>：在代码被提交到仓库前需要检测代码是否符合规范，以及单元测试是否通过</li> <li><strong>自动发布</strong>：更新完代码后，自动构建出线上发布代码并传输给发布系统</li></ul> <p>构建其实是工程化、自动化思想在前端开发中的体现。把一系列流程用代码去实现，让代码自动化地执行这一系列复杂的流程。😎</p> <h2 id="webpack-的基本概念"><a href="#webpack-的基本概念" aria-hidden="true" class="header-anchor">#</a> webpack 的基本概念</h2> <p><strong><a href="https://link.juejin.im/?target=https%3A%2F%2Fwww.webpackjs.com%2Fconcepts%2Fentry-points%2F" target="_blank" rel="noopener noreferrer">入口(entry point)<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></strong></p> <p>指示 webpack 应该使用哪个模块，来作为构建其内部依赖图的开始，webpack 会找出有哪些模块和 library 是入口起点（直接和间接）依赖的。</p> <blockquote><p>默认值是 <code>./src/index.js</code>，然而，可以通过在 webpack 配置中配置 entry 属性，来指定一个不同的入口起点（或者也可以指定多个入口起点）。</p></blockquote> <p><strong><a href="https://link.juejin.im/?target=https%3A%2F%2Fwww.webpackjs.com%2Fconcepts%2Foutput%2F" target="_blank" rel="noopener noreferrer">出口(output)<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></strong></p> <p>告诉 webpack 在哪里输出它所创建的 bundles，以及如何命名这些文件。</p> <blockquote><p>主输出文件默认为 <code>./dist/main.js</code>，其他生成文件的默认输出目录是 <code>./dist</code></p></blockquote> <p><strong><a href="https://link.juejin.im/?target=https%3A%2F%2Fwww.webpackjs.com%2Fconcepts%2Floaders%2F" target="_blank" rel="noopener noreferrer">加载器(loader)<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></strong></p> <p>让 webpack 能够去处理那些非 JavaScript 文件（webpack 本身只能加载 JavaScript/JSON 模块）。loader 可以将所有类型的资源文件转换为 webpack 能够处理的有效模块，然后你就可以利用 webpack 的打包能力，对它们进行处理。</p> <blockquote><p>loader 本身是一个函数，接受源文件作为参数，返回转换后的结果。注意，loader 能够 import 导入任何类型的模块（例如 .css 文件），这是 webpack 特有的功能，其他打包程序或任务执行器的可能并不支持。我们认为这种语言扩展是有很必要的，因为这可以使开发人员创建出更准确的依赖关系图。</p></blockquote> <p><strong><a href="https://link.juejin.im/?target=https%3A%2F%2Fwww.webpackjs.com%2Fconcepts%2Fplugins%2F" target="_blank" rel="noopener noreferrer">插件(plugins)<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></strong></p> <p>loader 被用于转换某些类型的模块，而插件则可以用于执行范围更广的任务。插件的范围包括，从打包优化和压缩，一直到重新定义环境中的变量。插件接口功能极其强大，可以用来处理各种各样的任务。</p> <blockquote><p>常用插件：</p> <ul><li>CleanWebpackPlugin：自动清除指定文件夹资源</li> <li>HtmlWebopackPlugin：根据模板自动生成 html 并引入 script 脚本</li> <li>UglifyJSPlugin：压缩 JS 代码</li></ul></blockquote> <p><strong><a href="https://link.juejin.im/?target=https%3A%2F%2Fwww.webpackjs.com%2Fconcepts%2Fmode%2F" target="_blank" rel="noopener noreferrer">模式(mode)<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></strong></p> <p>通过设置<code>mode</code>参数来选择 development(开发环境) 或 production(生产环境) 生产环境之中的一个，从而启用相应模式下的 webpack 内置的优化。</p> <blockquote><p>简单来说，开发时可能需要打印 debug 信息，还有定义 <code>sourcemap</code> 、<code>UglifyJSPlugin</code>文件，而生产环境是用于线上的即代码都是压缩后，运行时不打印 debug 信息等。譬如 axios、antd 等我们的生产环境中需要使用到那么我们应该安装该依赖在生产环境中，而 <code>webpack-dev-server</code> 则是需要安装在开发环境中。</p></blockquote> <p>👾 <strong>webpack 构建过程：</strong> 🏗</p> <ol><li>从 Entry 里配置的 Module 开始递归解析 Entry 依赖的所有 Module。</li> <li>每找到一个 Module， 就会根据配置的 Loader 去找出对应的转换规则。</li> <li>每找到一个 Module， 就会根据配置的 Loader 去找出对应的转换规则。</li> <li>这些模块会以 Entry 为单位进行分组，一个 Entry 和其所有依赖的 Module 被分到一个组也就是一个 Chunk(编码块)。</li> <li>最后 Webpack 会把所有 Chunk 转换成文件输出。</li> <li>在整个流程中 Webpack 会在恰当的时机执行 Plugin 里定义的逻辑。</li></ol> <h2 id="webpack-vs-grunt-gulp？"><a href="#webpack-vs-grunt-gulp？" aria-hidden="true" class="header-anchor">#</a> WebPack VS Grunt/Gulp？</h2> <p><strong>其实 Webpack 和另外两个并没有太多的可比性，Gulp/Grunt 是一种能够优化前端开发工作流程的工具，而 WebPack 是一种模块化的解决方案，不过 Webpack 的优点使它在很多场景下可以替代 Gulp/Grunt 类的工具。</strong></p> <h3 id="grunt-和-gulp-的工作方式"><a href="#grunt-和-gulp-的工作方式" aria-hidden="true" class="header-anchor">#</a> Grunt 和 Gulp 的工作方式</h3> <p>在一个配置文件中，指明对某些文件进行类似编译，组合，压缩等任务的具体步骤，这个工具之后可以自动替你完成这些任务。</p> <p><img src="/articleImg/gulp%E5%B7%A5%E4%BD%9C%E6%B5%81%E7%A8%8B.png" alt="Grunt和Gulp的工作流程"></p> <h3 id="webpack-的工作方式"><a href="#webpack-的工作方式" aria-hidden="true" class="header-anchor">#</a> Webpack 的工作方式</h3> <p>把你的项目当做一个整体，通过一个给定的主文件（如：index.js），Webpack 将从这个文件开始找到你的项目的所有依赖文件（如：component.js 、helper.js ），然后将这些模块使用不同的 loaders（第三方包）来处理它们，最后打包为一个浏览器可识别的 JavaScript 文件。（如：app.js）👇</p> <p><img src="/articleImg/webpack%E5%B7%A5%E4%BD%9C%E6%B5%81%E7%A8%8B.png" alt="webpack的工作流程"></p> <h2 id="搭建前端开发环境"><a href="#搭建前端开发环境" aria-hidden="true" class="header-anchor">#</a> 搭建前端开发环境</h2> <p>在明白了 Webpack 的概念之后，我们现在一步步的开始简单的使用 Webpack4.0+ 搭建基本的前端开发环境。👨🏻‍💻</p> <p><strong>主要包括以下几个方面：</strong></p> <ul><li>打包构建发布需要的 HTML、CSS、JS、图片等资源</li> <li>配置 babel 转码器， 使用 es6+语法</li> <li>使用 CSS 预处理器，这里使用 scss</li> <li>处理和压缩图片</li> <li>配置热加载，HMR</li></ul> <h3 id="安装命令"><a href="#安装命令" aria-hidden="true" class="header-anchor">#</a> 安装命令</h3> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># 卸载默认： </span>
<span class="token function">npm</span> uninstall webpack
<span class="token comment"># 全局安装：</span>
<span class="token function">npm</span> <span class="token function">install</span> webpack -g
<span class="token comment"># 局部安装： </span>
<span class="token function">npm</span> <span class="token function">install</span> webpack webpack-cli --save-dev
<span class="token comment"># 将 webpack 和 webpack-cli 放入项目开发环境依赖中</span>
</code></pre></div><blockquote><ul><li><strong>不推荐全局安装，它会将你项目中的 webpack 锁定到指定版本，并且在使用不同的 webpack 版本的项目中，可能会导致构建失败。</strong> ⚠️</li> <li>webpack 即 webpack 核心库。它提供了很多 <a href="https://webpack.js.org/api/node/" target="_blank" rel="noopener noreferrer">API<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>, 在 Node.js 脚本中通过  <code>require('webpack')</code> 的方式来使用 webpack。</li> <li>webpack-cli 是 webpack 的命令行工具。让我们可以不用写打包脚本，只需配置打包配置文件，然后在命令行输入 <code>webpack-cli --config webpack.config.js</code> 来使用 webpack, 简单很多。webpack 4 之前命令行工具是集成在 webpack 包中的，4.0 开始 webpack 包本身不再集成 cli。<strong>简单来说，如果不安装 webpack-cli 这个包，我们就没办法在命令行中使用 webpack 里的各种命令。</strong> 🤷🏻‍♂️</li> <li>webpack-serve (非必需) 是 webpack 提供的用来开发调试的服务器，让你可以用 <a href="http://127.0.0.1:8080/" target="_blank" rel="noopener noreferrer">http://127.0.0.1:8080/<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 这样的 url 打开页面来调试，有了它就不用配置 <a href="https://nginx.org/en/" target="_blank" rel="noopener noreferrer">nginx<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 了，方便很多。 🍻</li></ul></blockquote> <h3 id="准备工作"><a href="#准备工作" aria-hidden="true" class="header-anchor">#</a> 准备工作</h3> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># 1. 新建一个空的练习文件夹</span>
<span class="token function">mkdir</span>  webpack-demo
<span class="token function">cd</span> webpack-demo

<span class="token comment"># 2. 创建 package.json </span>
<span class="token comment"># npm 的说明文件,包括当前项目的基本信息，依赖模块，自定义的脚本任务</span>
<span class="token function">npm</span> init 
<span class="token comment"># 这里会问一些问题，可以直接回车跳过或者 npm init -y</span>

<span class="token comment"># 3. 局部安装</span>
<span class="token function">npm</span> i webpack webpack-cli -D

<span class="token comment"># 4. 创建项目代码文件夹src</span>
<span class="token function">mkdir</span> src
<span class="token function">cd</span> src

<span class="token comment"># 5. 创建项目入口文件</span>
<span class="token function">touch</span> index.html
<span class="token function">touch</span> index.js
</code></pre></div><p>index.html入口页面：</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token doctype">&lt;!DOCTYPE html&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>en<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>UTF-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>viewport<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>width=device-width, initial-scale=1.0<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">http-equiv</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>X-UA-Compatible<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>ie=edge<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Webpack 学习<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>root<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>index.js 入口文件：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">let</span> testStr <span class="token operator">=</span> <span class="token string">'Hello World, this is a webpack-demo.'</span>
document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'root'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>innerText <span class="token operator">=</span> testStr
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>testStr<span class="token punctuation">)</span>
</code></pre></div><h3 id="自定义配置文件"><a href="#自定义配置文件" aria-hidden="true" class="header-anchor">#</a> 自定义配置文件</h3> <p>其实 webpack 从 v4.0.0 开始已经可以一个配置文件都不写，实现<strong>零配置</strong> (使用默认配置文件)。😶</p> <p>比如我们此时在终端执行<code>npx webpack</code>，发现 webpack 已经把 src/index.js 文件里的内容打包生成到了 dist (将来部署到服务器上的文件夹)目录 mian.js 文件里。</p> <p><img src="/articleImg/npxwebpack.png" alt="npx webpack"></p> <p><strong>🤖关于如何运行webpack:</strong></p> <ul><li>这里直接执行 webpack 命令会提示command not found: webpack，这是因为我们之前没有将 webpack 以及 webpack-cli 进行全局安装，而是选择了在项目内局部安装。</li> <li>项目内安装的 webpack 实际上执行的是 node_modules 目录下 .bin 目录内的 webpack.js 脚本，所以使用<code>node ./node_modules/.bin/webpack</code>就可以启动 webpack。</li> <li><strong>更简单点的方式就是通过 npm 的包执行器 npx，<code>npx command</code> 默认就是执行 <code>./node_modules</code> 目录中安装的可执行脚本。如果这里 webpack 未安装，它也会自动从 npm 源下载安装后再执行。(使用<code>npx webapck -v</code>命令查看此项目安装的 webpack 版本号)</strong> 🤠</li> <li><strong>但是在4.0版本的 webpack 中，终端会因为未定义 webpack 的构建模式(<code>mode</code>属性)而出现 WARNING⚠️ ，所以最好的方式是在 package.json 文件的 scripts 里添加一段<code>&quot;build&quot;: &quot;webpack --mode development&quot;</code>(默认 production ，会压缩打包后的代码)后使用 <code>npm run build</code> 来运行 webpack。</strong> 👏</li></ul> <p>实际情况是，大多数项目都会需要我们对 webpack 增加更多的自定义配置信息，那么我们就需要在根目录下创建 webpack 的配置文件 <code>webpack.config.js</code> 。🙃</p> <p>然后再执行 <code>npm run build</code>，webpack 就会使用我们在这个文件里定义的配置信息了。</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">cd</span> webpack-demo
<span class="token function">touch</span> webpack.config.js
</code></pre></div><p><code>webpack.config.js</code> 中常用的基本配置信息：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  entry<span class="token punctuation">:</span> <span class="token string">''</span><span class="token punctuation">,</span> <span class="token comment">// 打包入口：指示 webpack 应该使用哪个模块，来作为构建其内部依赖图的开始</span>
  output<span class="token punctuation">:</span> <span class="token string">''</span><span class="token punctuation">,</span> <span class="token comment">// 出口目录</span>
  mode<span class="token punctuation">:</span> <span class="token string">'development'</span><span class="token punctuation">,</span> <span class="token comment">// 在这里更改了模式，就不必在package.json里再设置 --mode</span>
  resolve<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// 配置解析：配置别名、extensions 自动解析确定的扩展等等</span>
  devServer<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// 开发服务器：run dev/start 的配置，如端口、proxy等</span>
  module<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// 模块配置：配置loader（处理非 JavaScript 文件，比如 jsx、sass、vue、图片等等）</span>
  plugins<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token comment">// 插件配置：打包优化、资源管理和注入环境变量</span>
<span class="token punctuation">}</span>
</code></pre></div><blockquote><p>注意这个文件是在 node.js 中运行的，遵循<code>CommonJS</code>规范，因此不支持 ES6 的 <code>import</code> 语法。</p></blockquote> <h3 id="配置打包入口和出口"><a href="#配置打包入口和出口" aria-hidden="true" class="header-anchor">#</a> 配置打包入口和出口</h3> <div class="language-JavaScript extra-class"><pre class="language-javascript"><code><span class="token comment">// 引入 webpack 自带的 node 核心模块</span>
<span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token comment">/*
    entry: {
    	main:  './src/index.js'
    }
    */</span>
  	<span class="token comment">// 简写</span>
  	entry<span class="token punctuation">:</span>  <span class="token string">'./src/index.js'</span><span class="token punctuation">,</span>
    <span class="token comment">// 配置打包输出相关</span>
    output<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      <span class="token comment">// 打包输出目录，必须使用绝对地址，输出文件夹路径</span>
      path<span class="token punctuation">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'dist'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// 解析路径为 ./dist</span>
      <span class="token comment">// 入口 js 的打包输出文件名，默认为 main.js</span>
      filename<span class="token punctuation">:</span> <span class="token string">&quot;bundle.js&quot;</span> 
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
</code></pre></div><p>也可以使用下面的写法：👇</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span>

<span class="token comment">// 重新配置入口文件路径以及出口文件路径</span>
<span class="token keyword">const</span> <span class="token constant">PATH</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
    app<span class="token punctuation">:</span>path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&quot;./src/index.js&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    build<span class="token punctuation">:</span>path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&quot;./dist&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
    entry<span class="token punctuation">:</span><span class="token punctuation">{</span>
        <span class="token comment">//这里面的key值决定了下面name的名字叫什么</span>
        app<span class="token punctuation">:</span><span class="token constant">PATH</span><span class="token punctuation">.</span>app
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    output<span class="token punctuation">:</span><span class="token punctuation">{</span>
        path<span class="token punctuation">:</span><span class="token constant">PATH</span><span class="token punctuation">.</span>build<span class="token punctuation">,</span>
        filename<span class="token punctuation">:</span><span class="token string">&quot;[name].js&quot;</span> <span class="token comment">// 即app.js</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
</code></pre></div><p>⚠️要自定义 webapck 打包后的 output 路径，必须要先引入 webpack 自带的 node 核心模块 path <code>const path = require('path')</code>。</p> <ul><li><code>path.join()</code> 将第一个参数和第二个参数进行链接(路径连接)，该方法的主要用途在于，会正确使用当前系统的路径分隔符，Unix系统是 /，Windows系统是 \。</li> <li><code>path.resolve()</code>会把一个路径或路径片段的序列参数解析为一个绝对路径， 也可以变成相对路径。</li> <li><code>__dirname</code> 变量指的就是<code>webpack.config.js</code>这个文件所在的，当前这个目录的绝对路径。</li></ul> <h3 id="打包-html-入口文件"><a href="#打包-html-入口文件" aria-hidden="true" class="header-anchor">#</a> 打包 html 入口文件</h3> <p>通过上面的配置，执行<code>npm run build</code>之后我们可以发现 webpack 已经将打包入口文件 src/index.js 打包到了 dist 目录下的 bundle.js 文件里。</p> <p>此时在 src/index.html 文件里引用<code>&lt;script src=&quot;../dist/bundle.js&quot;&gt;&lt;/script&gt;</code>文件后在浏览器打开就能看到我们在 src/index.js 写的代码运行结果了。或者也可以将 src/index.html 移动到 dist 文件夹下，然后引入文件<code>&lt;script src=&quot;./bundle.js&quot;&gt;&lt;/script&gt;</code>。</p> <p>这样做也可以，但没必要。 😏 因为手动引用打包后的 js 文件显得一点都不智能，而且当我们修改配置文件里打包输出的文件名后，index.html 里的引用路径就会出错。</p> <p>所以我们可以使用 <a href="https://webpack.docschina.org/plugins/html-webpack-plugin/" target="_blank" rel="noopener noreferrer">html-webpack-plugin<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 插件以 src/index.html 为模板来生成 dist/html 文件 ，并将 HTML 引用 JS 的路径和我们的构建结果自动关联起来。👏</p> <p>安装：</p> <p><code>npm install html-webpack-plugin -D</code></p> <p>修改 webpack.config.js 文件：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> HtmlWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'html-webpack-plugin'</span><span class="token punctuation">)</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  plugins<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token keyword">new</span> <span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        filename<span class="token punctuation">:</span> <span class="token string">'index.html'</span><span class="token punctuation">,</span> 
        template<span class="token punctuation">:</span> <span class="token string">'./src/index.html'</span><span class="token punctuation">,</span>
      <span class="token comment">/*
      因为和 webpack 4 的兼容性问题，chunksSortMode 参数需要设置为 none
      https://github.com/jantimon/html-webpack-plugin/issues/870
      */</span>
        chunksSortMode<span class="token punctuation">:</span> <span class="token string">'none'</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><blockquote><p>template 参数指定入口 html 文件路径，插件会把这个文件作为 html 模板交给 webpack 去编译，并将构建结果储存为 html 文件到输出目录，默认文件名为 index.html。也可以通过 filename 参数指定输出的文件名。</p> <p>html-webpack-plugin 也可以不指定 template 参数，它会使用插件默认的 html 模板。</p></blockquote> <p>重新执行 npm run build ，dist 目录下会产生一个包含以下内容的 index.html 文件：</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token doctype">&lt;!DOCTYPE html&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>en<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>UTF-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>viewport<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>width=device-width, initial-scale=1.0<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">http-equiv</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>X-UA-Compatible<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>ie=edge<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Webpack 学习<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>root<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>text/javascript<span class="token punctuation">&quot;</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>bundle.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><blockquote><p>插件已经自动帮我们把打包后的 bundle.js 文件正确地引用到根据指定模板生成的 html 里啦。👆</p></blockquote> <h3 id="打包-css-scss-文件"><a href="#打包-css-scss-文件" aria-hidden="true" class="header-anchor">#</a> 打包 css/scss 文件</h3> <p>接下来如果我们希望使用 webpack 来进行构建 css 文件，那么就需要在配置文件中引入 <a href="https://webpack.docschina.org/loaders/css-loader/" target="_blank" rel="noopener noreferrer">css-loader<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 和  <a href="https://webpack.docschina.org/loaders/style-loader/" target="_blank" rel="noopener noreferrer">style-loader<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 这两个 loader 来解析和处理 css文件。</p> <p>为什么要安装两个 loader，是因为前者可以让 css 文件也支持 <code>import</code>，并且会解析多个 css 文件的关系，最终把它们合并成一段 css。后者可以将解析出来的 css 通过 <code>style</code> 标签的形式插入到 HTML 页面中的 <code>&lt;head&gt;</code> 部分，所以  <code>style-loader</code> 依赖 <code>css-loader</code> 。</p> <p>安装：</p> <p><code>npm install css-loader style-loader -D</code></p> <p>另外，如果要处理 scss 文件，还需要引入 <code>sass-loader</code>。同样，它依赖于前两个loader。</p> <p><strong>同时还要安装 <code>node-sass</code>，<a href="https://github.com/sass/node-sass" target="_blank" rel="noopener noreferrer">node-sass<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 是 sass-loader 的 <a href="https://docs.npmjs.com/files/package.json#peerdependencies" target="_blank" rel="noopener noreferrer">peerDependency<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>。</strong>(ps:就是安装很慢的那个 🙄</p> <p>安装：</p> <p><code>npm install sass-loader node-sass -D</code></p> <blockquote><p>💣 <strong>注意是 sass-loader 不是 scss-loader 哦！</strong> 🤪</p></blockquote> <p>添加样式文件：</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">cd</span> src
<span class="token function">mkdir</span> styles <span class="token operator">&amp;&amp;</span> <span class="token function">cd</span> styles
<span class="token function">touch</span> index.scss
</code></pre></div><p>在 index.scss 文件里编辑样式代码后，并且在 src/index.js 中引入 <code>import './styles/index.scss'</code></p> <p>修改 <code>webpack.config.js</code> 文件：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  <span class="token comment">/*
    配置各种类型文件的加载器，称之为 loader
    webpack 当遇到 import ... 时，会调用这里配置的 loader 对引用的文件进行编译
    */</span>
  module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token comment">/**
     * test: 匹配特定条件。一般是提供一个正则表达式或正则表达式的数组
     * include: 匹配特定条件。一般是提供一个字符串或者字符串数组
     * exclude: 排除特定条件
     * and: 必须匹配数组中的所有条件
     * or: 匹配数组中任何一个条件
     * nor: 必须排除这个条件
     * use: 指定处理该文件的 loader, 值可以是字符串或者数组。loader 的执行顺序是从最后一个到第一个。
     */</span>
    rules<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token punctuation">:</span> <span class="token regex">/\.(css|scss)$/</span><span class="token punctuation">,</span> <span class="token comment">// 匹配css和scss文件</span>
        include<span class="token punctuation">:</span> <span class="token punctuation">[</span>path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'src'</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        use<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'style-loader'</span><span class="token punctuation">,</span> <span class="token string">'css-loader'</span><span class="token punctuation">,</span> <span class="token string">'sass-loader'</span><span class="token punctuation">]</span>
        <span class="token comment">// loader的执行顺序是从右至左/从下往上。</span>
        <span class="token comment">// use: ['style-loader', 'css-loader', 'sass-loader', 'postcss-loader']</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
  <span class="token comment">//...</span>
<span class="token punctuation">}</span>
</code></pre></div><ol><li>如果匹配到 scss 文件那么首先经过 sass-loader 翻译处理为 css。</li> <li>然后 css-loader 将 css 文件内容存为 js 字符串，并转化成 CommonJS 模块，把 background、@font-face 等引用的图片，字体文件交给指定的 loader 打包。</li> <li>最后 style-loader 将 js 字符串生成为 style 节点挂载到页面的 head 里。</li></ol> <p>经由上述 sass-loader 和 css-loader 的处理后，css/scss 代码会转变为 JS， 如果需要单独把 css 文件分离出来，我们需要使用 <a href="https://link.juejin.im/?target=https%3A%2F%2Fgithub.com%2Fwebpack-contrib%2Fmini-css-extract-plugin" target="_blank" rel="noopener noreferrer">mini-css-extract-plugin<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 插件。</p> <p>同时，在使用 css3 里一些需要添加厂商前缀的新特性的时候，我们可以使用 <a href="https://webpack.docschina.org/loaders/postcss-loader/" target="_blank" rel="noopener noreferrer">postcss-loader<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 配合 <a href="https://webpack.js.org/loaders/postcss-loader/#autoprefixing" target="_blank" rel="noopener noreferrer">autoprefixer<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 插件来实现自动添加厂商前缀的功能。</p> <h3 id="打包图片"><a href="#打包图片" aria-hidden="true" class="header-anchor">#</a> 打包图片</h3> <p>安装：</p> <p><code>npm install file-loader -D</code></p> <p><strong><a href="https://webpack.docschina.org/loaders/file-loader" target="_blank" rel="noopener noreferrer">file-loader<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>:</strong> 不只是用来处理图片，可以用于处理很多类型的静态资源文件( txt、svg、ex )，它的主要作用是直接输出文件，并把构建后的文件路径返回。</p> <p>添加图片资源文件夹：</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">cd</span> src
<span class="token function">mkdir</span> assets <span class="token operator">&amp;&amp;</span> <span class="token function">cd</span> assets
<span class="token function">mkdir</span> images 
</code></pre></div><p>编辑配置文件：</p> <div class="language-js extra-class"><pre class="language-js"><code>rules<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token comment">// ...</span>
      <span class="token punctuation">{</span>
        test<span class="token punctuation">:</span> <span class="token regex">/\.(png|jpg|gif)$/</span><span class="token punctuation">,</span>
        use<span class="token punctuation">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span>
            loader<span class="token punctuation">:</span> <span class="token string">'file-loader'</span><span class="token punctuation">,</span>
            options<span class="token punctuation">:</span> <span class="token punctuation">{</span>
              outputPath<span class="token punctuation">:</span> <span class="token string">'images/'</span><span class="token punctuation">,</span> <span class="token comment">//输出到dist的images文件夹</span>
            <span class="token punctuation">}</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">]</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
</code></pre></div><p>在 assets/images 文件夹内放入 webpack.jpg 图片，然后修改 index.js 文件引入这个图片并使用它。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token string">'./styles/index.scss'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> webpackImg <span class="token keyword">from</span> <span class="token string">'./assets/images/webpack.jpg'</span><span class="token punctuation">;</span>
<span class="token comment">// var webpackImg = require('./assets/images/webpack.jpg')</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>webpackImg<span class="token punctuation">)</span>

<span class="token keyword">let</span> img <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Image</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
img<span class="token punctuation">.</span>src <span class="token operator">=</span> webpackImg<span class="token punctuation">;</span>

<span class="token keyword">let</span> testStr <span class="token operator">=</span> <span class="token string">'Hello World, this is a webpack-demo.'</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> root <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'root'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
root<span class="token punctuation">.</span>innerText <span class="token operator">=</span> testStr<span class="token punctuation">;</span>
root<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>img<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>testStr<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><code>npm run build</code>之后，我们会发现 file-loader 已经把图片重命名后打包到了 dist 目录下的 images 文件夹里，同时会把该文件相对于 dist 目录的文件路径名称作为返回值返回。(可打开控制台查看输出信息 👀)</p> <p>如果我们不想被打包后的文件名称发生改变或者是想指定打包文件的存放位置，那么可以通过编辑 file-loader 的 options 属性来完成配置。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">{</span>
	loader<span class="token punctuation">:</span> <span class="token string">'file-loader'</span><span class="token punctuation">,</span>
	options<span class="token punctuation">:</span> <span class="token punctuation">{</span>
	  outputPath<span class="token punctuation">:</span> <span class="token string">'images/'</span><span class="token punctuation">,</span> <span class="token comment">//输出到 dist 的 images文件夹</span>
      name<span class="token punctuation">:</span> <span class="token string">'[name].[ext]'</span><span class="token punctuation">,</span> <span class="token comment">// placeholder 的具体含义可查看文档</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong><a href="https://webpack.docschina.org/loaders/url-loader/" target="_blank" rel="noopener noreferrer">url-loader<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>:</strong> 有了<code>file-loader</code>我们就可以对图片进行打包，但如果图片较多，页面加载时就要发出很多 http 请求，这会降低性能。</p> <p>而<code>url-loader</code> 会把引入的图片编码，生成 <code>dataURl</code>。相当于把图片数据翻译成一串字符。再把这些字符串打包到一个文件中，最终只需要引入这个文件就能访问图片了，这可以节省 http 请求。</p> <p>But! 如果图片较大，编码会消耗性能。因此 <code>url-loader</code> 提供了一个 <code>limit</code> 参数，小于 limit 字节的文件会被转为 DataURl，大于 limit 的还是会使用 <code>file-loader</code> 进行 copy。</p> <blockquote><ul><li>url-loader 可以看作是增强版的 file-loader。</li> <li>url-loader 在文件大小（单位 byte）低于指定的限制时，可以返回一个 DataURL。然后把图片编码成 base64 格式写进页面，从而减少服务器请求。</li></ul></blockquote> <div class="language-javascript extra-class"><pre class="language-javascript"><code>rules<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token comment">// ...</span>
      <span class="token punctuation">{</span>
        test<span class="token punctuation">:</span> <span class="token regex">/\.(png|jpg|gif)$/</span><span class="token punctuation">,</span>
        use<span class="token punctuation">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span>
            loader<span class="token punctuation">:</span> <span class="token string">'url-loader'</span><span class="token punctuation">,</span> <span class="token comment">// 指定使用 url-loader 处理图片</span>
            options<span class="token punctuation">:</span> <span class="token punctuation">{</span>
              outputPath<span class="token punctuation">:</span> <span class="token string">'images/'</span><span class="token punctuation">,</span> 
              name<span class="token punctuation">:</span> <span class="token string">'[name].[ext]'</span><span class="token punctuation">,</span>
              limit<span class="token punctuation">:</span> <span class="token number">600</span> <span class="token comment">//是把小于600B的文件打成Base64的格式</span>
            <span class="token punctuation">}</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">]</span>
      <span class="token punctuation">}</span>
<span class="token punctuation">]</span>
</code></pre></div><blockquote><ul><li><p>同时安装 file-loader、url-loader 后，可以只指定 url-loader 处理图片资源文件。</p></li> <li><p>当文件大于 limit 时，url-loader 会调用 file-loader, 把文件储存到输出目录，并把引用的文件路径改写成输出后的路径。</p></li> <li><p>当文件体积小于 limit 时，url-loader 把文件转为 Data URI 的格式内联到引用的地方。(打开控制台查看效果)</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>./assets/images/smallpic.png<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token comment">&lt;!--会被编译成--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAA...<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
</code></pre></div></li></ul></blockquote> <h3 id="配置-babel"><a href="#配置-babel" aria-hidden="true" class="header-anchor">#</a> 配置 babel</h3> <p>接下来，为了能让不支持 ES6 的浏览器（比如万恶的 IE ）也能照常运行，我们需要安装 <a href="http://babeljs.io/" target="_blank" rel="noopener noreferrer">babel<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>, 它会把我们写的 ES6 源代码转化成 ES5，这样我们源代码写 ES6，打包时生成 ES5。</p> <p>安装：</p> <blockquote><p>webpack 4.x | babel-loader 8.x | babel 7.x</p></blockquote> <p><code>npm i babel-loader @babel/core @babel/preset-env -D</code></p> <blockquote><ul><li>Babel 7.x 的相关依赖包需要加上 <code>@babel/ scope</code>(babel核心库)</li> <li>用 babel 转换 ES6 代码需要使用到 <code>babel-loader</code></li> <li><code>@babel/preset-env</code>默认情况下是等于 ES2015 + ES2016 + ES2017，也就是说它对这三个版本的 ES 语法进行转化</li> <li>Babel 7.x 一个主要变化是 presets 设置由原来的 <code>env</code> 换成了 <code>@babel/preset-env</code>, 可以配置 <code>targets</code>, <code>useBuiltIns</code> 等选项用于编译出兼容目标环境的代码</li> <li>其中 <code>useBuiltIns</code> 如果设为 <code>&quot;usage&quot;</code>，Babel 会根据实际代码中使用的 ES6/ES7 代码，以及与你指定的 targets，按需引入对应的 <code>polyfill</code>，而无需在 src/index.js 代码中直接引入 <code>import '@babel/polyfill'</code>，避免输出的包过大，同时又可以放心使用各种新语法特性。</li></ul></blockquote> <p>配置webpack.config.js：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token punctuation">{</span>
	test<span class="token punctuation">:</span> <span class="token regex">/\.m?js$/</span><span class="token punctuation">,</span>
    exclude<span class="token punctuation">:</span> <span class="token regex">/node_modules/</span><span class="token punctuation">,</span>
    use<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    	loader<span class="token punctuation">:</span> <span class="token string">'babel-loader'</span><span class="token punctuation">,</span>
        options<span class="token punctuation">:</span> <span class="token punctuation">{</span>
          presets<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'@babel/preset-env'</span><span class="token punctuation">]</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>此时 webpack 就可以转义并打包我们 ES6 的语法了，<strong>同时我们也可以将对 babel 的详细配置写到 .babelrc 文件中。</strong> 在根目录下新建 .babelrc 文件 <code>touch .babelrc</code></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token punctuation">{</span>
  <span class="token string">&quot;presets&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">[</span><span class="token string">&quot;@babel/preset-env&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
      modules<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
      useBuiltIns<span class="token punctuation">:</span> <span class="token string">'usage'</span><span class="token punctuation">,</span>
      targets<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        <span class="token string">&quot;browsers&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&quot;&gt; 1%&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;last 2 versions&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;not ie &lt;= 8&quot;</span><span class="token punctuation">]</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">]</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><blockquote><p>这就是 babel-preset-env 的作用，帮助我们配置 babel。我们只需要告诉它我们要兼容的情况（目标运行环境），它就会自动把代码转换为兼容对应环境的代码。</p> <p>以上代码表示我们要求代码兼容最新两个版本的浏览器，不用兼容 IE 8，另外市场份额超过 1% 的浏览器也必须支持。</p> <p>只需要告诉 babel-preset-env 你想要兼容的环境，它就会自动转换。</p></blockquote> <p>但是这种方式也并不是所有场景都适用的，如果你正在开发的是一个类库或者第三方模块，那么就不能使用这种配置方式。(因为 polyfill 的代码是通过全局变量的形式注入的，这样会污染全局环境)</p> <p>此时就要安装<code>@babel/plugin-transform-runtime</code>这个插件，然后再参照文档进行相关配置。</p> <p><strong>具体babel 在各种情况下的配置方法可以在官网的<a href="https://babeljs.io/setup#installation" target="_blank" rel="noopener noreferrer">setup<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>页面查看</strong> 😋</p> <h3 id="配置热加载"><a href="#配置热加载" aria-hidden="true" class="header-anchor">#</a> 配置热加载</h3> <p>上面的一系列操作都是研究如何打包文件，但每次编辑代码之后我们都需要在终端重新执行一次<code>npm run build</code>重新打包，然后再去 dist 目录下找到输出的文件并打开查看打包编译后的结果。</p> <p>🤦🏻‍♂️为了不那么痛苦，我们可以采取一些措施来提升开发效率。</p> <p>最简单的是使用 webpack 的 <a href="https://webpack.docschina.org/guides/development/#%E4%BD%BF%E7%94%A8-watch-mode-%E8%A7%82%E5%AF%9F%E6%A8%A1%E5%BC%8F-" target="_blank" rel="noopener noreferrer">watch mode<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>，在 package.json 文件的 scripts 中再添加一条：</p> <p><code>&quot;watch&quot;: &quot;webpack --watch&quot;</code></p> <p>加入<code>—watch</code>参数后，再在终端执行<code>npm run watch</code>，此时 webpack 就会帮我们 watch 监听文件的变化并自动重新打包。</p> <p>修改代码后不用在终端重新执行命令，但要刷新浏览器才能查看更新的效果。🙃</p> <p>更好一点的方案是使用 <a href="https://webpack.docschina.org/guides/development/#%E4%BD%BF%E7%94%A8-webpack-dev-server" target="_blank" rel="noopener noreferrer">webpack-dev-server <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 在本地开启一个简单的本地静态服务来进行开发。从而实现每次 src 目录下的源代码发生改变，dist 目录就会自动重新打包。😄</p> <p>(ps: 其实并不会生成 dist 文件夹，而是将打包后的内容放到电脑的内存中，从而提升打包速度。)</p> <blockquote><p><code>webpack-dev-server</code> 是 webpack 官方提供的一个工具，可以基于当前的 webpack 构建配置快速启动一个静态服务。</p> <p>当 <code>mode</code> 为 <code>development</code> 时，会具备热加载 （hot reload） 的功能，即当源码文件变化时，会即时更新当前页面，以便你看到最新的效果。</p></blockquote> <p>安装：</p> <p><code>npm i webpack-dev-server -D</code></p> <p>在 package.json 的 scripts 中添加：</p> <p><code>&quot;start&quot;: &quot;webpack-dev-server --open&quot;</code></p> <blockquote><p><code>--open</code> 参数会帮助我们自动打开浏览器并访问 web server</p></blockquote> <p>然后执行<code>npm start</code>，webapck 就会默认开启一个 web server <a href="https://link.juejin.im/?target=http%3A%2F%2Flocalhost%3A8080%2F" target="_blank" rel="noopener noreferrer">http://localhost:8080/<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 便于我们开发。🥳</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// devtool:{}</span>
devServer<span class="token punctuation">:</span> <span class="token punctuation">{</span>
	contentBase<span class="token punctuation">:</span> <span class="token string">'./dist'</span><span class="token punctuation">,</span> <span class="token comment">// web server 服务器的根路径</span>
	open<span class="token punctuation">:</span> <span class="token string">'true'</span><span class="token punctuation">,</span>  <span class="token comment">// 等于 --open</span>
	port<span class="token punctuation">:</span> <span class="token string">'8086'</span><span class="token punctuation">,</span> <span class="token comment">// 服务器端口号</span>
	proxy<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      <span class="token string">'/api'</span><span class="token punctuation">:</span> <span class="token string">'http://localhost:3000'</span> <span class="token comment">// 配置代理</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>它还有很多配置选项可以来帮助我们提升开发效率，具体可查阅<a href="https://webpack.docschina.org/configuration/dev-server/" target="_blank" rel="noopener noreferrer">文档<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>使用。</p></div></article> <section class="post-meta main-div" data-v-4e23451f><section class="post-date clearfix" data-v-4e23451f><span class="create-date" data-v-4e23451f>
      发布时间 : 2018-12-28
    </span> <!----></section> <section class="post-links" data-v-4e23451f><a href="/posts/2018/09/11/group-arr-data-by-item-attribute.html" class="post-link" data-v-4e23451f>
      上一篇 : 将数组内容按元素属性进行重新分组
    </a> <a href="/posts/2019/03/20/deploying-to-github-pages-using-circle-ci-2-0.html" class="post-link" data-v-4e23451f>
      下一篇 : 利用Circle CI2.0自动化部署Github Pages
    </a></section></section> <!----></div></main> <aside class="aside" data-v-6cd81e6a><div class="info-card main-div" data-v-3da8ff8d data-v-6cd81e6a><div class="info-card-header" data-v-3da8ff8d><img src="/img/avatar.png" alt="W-Qing" class="info-avatar" data-v-3da8ff8d></div> <div class="info-card-body" data-v-3da8ff8d><section class="info-nickname" data-v-3da8ff8d>
      W-Qing
    </section> <section class="info-desc" data-v-3da8ff8d>I may be lonely,<br/>but l'm not stupid,<br/>l try to live with my mistake.</section> <section class="info-contact" data-v-3da8ff8d><section data-v-3da8ff8d><span title="Shanghai City, China" data-v-3da8ff8d data-v-3da8ff8d><svg class="icon" style="font-size:1em;" data-v-3da8ff8d data-v-3da8ff8d><title data-v-3da8ff8d data-v-3da8ff8d>Shanghai City, China</title><use xlink:href="#icon-location" data-v-3da8ff8d data-v-3da8ff8d></use></svg><span class="info-text" data-v-3da8ff8d data-v-3da8ff8d>
          Shanghai City, China
        </span></span></section> <section data-v-3da8ff8d><span title="Ludong University" data-v-3da8ff8d data-v-3da8ff8d><svg class="icon" style="font-size:1em;" data-v-3da8ff8d data-v-3da8ff8d><title data-v-3da8ff8d data-v-3da8ff8d>Ludong University</title><use xlink:href="#icon-organization" data-v-3da8ff8d data-v-3da8ff8d></use></svg><span class="info-text" data-v-3da8ff8d data-v-3da8ff8d>
          Ludong University
        </span></span></section> <section data-v-3da8ff8d><a href="mailto:sunburst.wang@qq.com" title="sunburst.wang@qq.com" data-v-3da8ff8d data-v-3da8ff8d><svg class="icon" style="font-size:1em;" data-v-3da8ff8d data-v-3da8ff8d><title data-v-3da8ff8d data-v-3da8ff8d>sunburst.wang@qq.com</title><use xlink:href="#icon-email" data-v-3da8ff8d data-v-3da8ff8d></use></svg><span class="info-text" data-v-3da8ff8d data-v-3da8ff8d>
          sunburst.wang@qq.com
        </span></a></section></section></div> <div class="info-card-footer" data-v-3da8ff8d><section class="info-sns clearfix" data-v-3da8ff8d><a href="https://github.com/W-Qing" target="_blank" class="sns-link" data-v-3da8ff8d><span title="GitHub: W-Qing" class="sns-icon" data-v-3da8ff8d data-v-3da8ff8d><svg class="icon" style="font-size:1.5em;" data-v-3da8ff8d data-v-3da8ff8d><title data-v-3da8ff8d data-v-3da8ff8d>GitHub: W-Qing</title><use xlink:href="#icon-github" data-v-3da8ff8d data-v-3da8ff8d></use></svg></span></a></section></div></div> <div class="post-nav-card main-div" style="position:relative;top:0;width:0px;" data-v-6cd81e6a><div class="post-nav-contents"><svg class="icon"><title>book</title><use xlink:href="#icon-book"></use></svg> <span>文章目录</span> <div class="post-nav-toc"><ul><li><a href="/posts/2018/12/28/webpack-quick-start.html#什么是-webpack？">什么是 Webpack？</a></li><li><a href="/posts/2018/12/28/webpack-quick-start.html#webpack-有什么作用？">Webpack 有什么作用？</a></li><li><a href="/posts/2018/12/28/webpack-quick-start.html#webpack-的基本概念">webpack 的基本概念</a></li><li><a href="/posts/2018/12/28/webpack-quick-start.html#webpack-vs-grunt-gulp？">WebPack VS Grunt/Gulp？</a><ul><li><a href="/posts/2018/12/28/webpack-quick-start.html#grunt-和-gulp-的工作方式">Grunt 和 Gulp 的工作方式</a></li><li><a href="/posts/2018/12/28/webpack-quick-start.html#webpack-的工作方式">Webpack 的工作方式</a></li></ul></li><li><a href="/posts/2018/12/28/webpack-quick-start.html#搭建前端开发环境">搭建前端开发环境</a><ul><li><a href="/posts/2018/12/28/webpack-quick-start.html#安装命令">安装命令</a></li><li><a href="/posts/2018/12/28/webpack-quick-start.html#准备工作">准备工作</a></li><li><a href="/posts/2018/12/28/webpack-quick-start.html#自定义配置文件">自定义配置文件</a></li><li><a href="/posts/2018/12/28/webpack-quick-start.html#配置打包入口和出口">配置打包入口和出口</a></li><li><a href="/posts/2018/12/28/webpack-quick-start.html#打包-html-入口文件">打包 html 入口文件</a></li><li><a href="/posts/2018/12/28/webpack-quick-start.html#打包-css-scss-文件">打包 css/scss 文件</a></li><li><a href="/posts/2018/12/28/webpack-quick-start.html#打包图片">打包图片</a></li><li><a href="/posts/2018/12/28/webpack-quick-start.html#配置-babel">配置 babel</a></li></ul></li></ul></div></div> <!----></div></aside></div> <footer class="footer" data-v-1114308c><p class="sns-links" data-v-1114308c><a href="https://github.com/W-Qing" target="_blank" class="sns-link" data-v-1114308c><span title="GitHub: W-Qing" class="sns-icon" data-v-1114308c data-v-1114308c><svg class="icon" style="font-size:25px;" data-v-1114308c data-v-1114308c><title data-v-1114308c data-v-1114308c>GitHub: W-Qing</title><use xlink:href="#icon-github" data-v-1114308c data-v-1114308c></use></svg></span></a></p> <p data-v-1114308c><span data-v-1114308c>Powered by </span> <a href="https://vuepress.vuejs.org" target="_blank" data-v-1114308c>
      Vuepress
    </a></p></footer></div><div class="global-ui"><!----><!----></div></div>
    <script src="/assets/js/vendor.2.8681790c.js" defer></script><script src="/assets/js/26.6a17249a.js" defer></script><script src="/assets/js/vendor.1.d0cf3ae5.js" defer></script><script src="/assets/js/vendor.0.6b1a4519.js" defer></script><script src="/assets/js/app.a5059352.js" defer></script>
  </body>
</html>
