---
category: React
tags: 
  - Notes
title: 'Reactç¬”è®°'
description: 'Reactç¬”è®°'
date: 2019-06-23
vssue: false
---

<!-- more -->

# Reactç¬”è®°

å…ˆæ’¸ä¸€éåŸºç¡€æ–‡æ¡£ï¼š[Reactå®˜ç½‘æ–‡æ¡£](https://reactjs.org/docs/getting-started.html) ğŸ‘ˆ [ä¸­æ–‡ç‰ˆ](https://zh-hans.reactjs.org/docs/getting-started.html) ğŸ‘ˆ

## 1. JSX

### 1. JSX çš„æœ¬è´¨æ˜¯è¯­æ³•ç³–

```jsx
const name = 'mintnoii';
const element = <h1 className="demo">Hello, {name}</h1>;
```

è¿™ç§æ—¢ä¸æ˜¯å­—ç¬¦ä¸²ä¹Ÿä¸æ˜¯ HTML çš„è¯­æ³•å½¢å¼è¢«ç§°ä¸º JSXï¼Œæ˜¯ä¸€ä¸ªçœ‹èµ·æ¥å¾ˆåƒ XML çš„ JavaScript è¯­æ³•æ‰©å±•ã€‚

â€œ JSX å¯èƒ½ä¼šä½¿äººè”æƒ³åˆ°æ¨¡ç‰ˆè¯­è¨€ï¼Œä½†å®ƒå…·æœ‰ JavaScript çš„å…¨éƒ¨åŠŸèƒ½ã€‚â€ (JSX æ˜¯åœ¨ JavaScript å†…éƒ¨å®ç°çš„)

æ‰€ä»¥å®ƒä¸æ˜¯æ¨¡æ¿è¯­è¨€ï¼Œè€Œæ˜¯çº¯ JavaScriptï¼ŒReact ä½¿ç”¨ JSX (éå¿…é¡»)æ¥æè¿°ç•Œé¢ UI çš„æ ·å¼åŠäº¤äº’ã€‚

>  JSX æœ€ç»ˆä¼šè¢« babel ç¼–è¯‘ä¸ºåˆæ³•çš„ JS è¯­å¥è°ƒç”¨ï¼ˆç¼–è¯‘å™¨åœ¨é‡åˆ°`{`æ—¶é‡‡ç”¨JSè¯­æ³•è¿›è¡Œè§£æï¼Œé‡åˆ°`<`å°±é‡‡ç”¨HTMLè§„åˆ™è¿›è¡Œè§£æï¼‰

è€Œå®é™…ä¸Š babel ä¼šæŠŠ JSX ç¼–è¯‘ç»™`React.createElement()`å‡½æ•°è°ƒç”¨ã€‚

ä¸Šé¢çš„ä»£ç ç­‰åŒäºä»¥ä¸‹è¯­å¥ï¼š

```jsx
const name = 'mintnoii';
const element = React.createElement(
  'h1',
  {className: 'demo'}, // htmlæ ‡ç­¾å±æ€§
	'Hello, ',
  name
);
```

`React.createElement()`æ–¹æ³•ä¼šé¦–å…ˆå¯¹ä½ å†™çš„ JSX è¿›è¡Œä¸€äº›é¿å… bug ğŸ›çš„æ£€æŸ¥ï¼Œç„¶ååˆ›å»ºä¸€ä¸ªç±»ä¼¼äºä»¥ä¸‹ä¾‹å­çš„å¯¹è±¡ï¼š

```jsx
// æ³¨æ„ï¼šè¿™æ˜¯ç®€åŒ–åçš„ç»“æ„,ä¸React.createElement()åˆ›å»ºçš„å¹¶ä¸å®Œå…¨ä¸€æ ·
const element = {
    type: 'h1',
    props: {
        className: 'demo',
        children: 'Hello, mintnoii'
    }
}
```

è¿™æ ·çš„å¯¹è±¡ï¼Œåˆ™ç§°ä¸º`Reactå…ƒç´ `ï¼Œä»£è¡¨å°†è¦å‘ˆç°åœ¨å±å¹•ä¸Šçš„ä¸œè¥¿ã€‚Reactæ­£æ˜¯é€šè¿‡è¯»å–è¿™äº›å¯¹è±¡æ¥æ„å»ºDOMï¼Œä»è€Œä¿æŒæ•°æ®å’Œ UI åŒæ­¥æ›´æ–°çš„ã€‚

åœ¨ä¼ ç»Ÿæ¨¡å¼ä¸‹ï¼Œæˆ‘ä»¬é€šå¸¸éœ€è¦å­¦ä¹ é¢å¤–çš„æ¨¡æ¿ DSL (Domain-Specific Language é¢†åŸŸç‰¹å®šè¯­è¨€) æ¥åˆ›å»ºåº”ç”¨ç•Œé¢ä»è€Œæ–¹ä¾¿å»æè¿° UI çŠ¶æ€å˜åŒ–æˆ–å®šä¹‰äº¤äº’è¡Œä¸ºã€‚è€Œåœ¨ React  ä¸­ä½¿ç”¨ JSX æœ‰ä»¥ä¸‹å‡ ä¸ªä¼˜ç‚¹ï¼š

1. åˆ©ç”¨åŸç”Ÿæˆ–è‡ªå·±å®šä¹‰çš„æ ‡ç­¾æ¥ç›´è§‚çš„å£°æ˜å¼çš„åˆ›å»ºåº”ç”¨ç•Œé¢
2. åˆ©ç”¨ä»£ç åŠ¨æ€çµæ´»çš„æ§åˆ¶ç•Œé¢ UI ç»“æ„åŠå±æ€§å˜åŒ– 
3. ä¸éœ€è¦å­¦ä¹ æ–°çš„æ¨¡æ¿è¯­è¨€

ğŸ—¿æ€»ç»“ï¼š**JSX çš„æœ¬è´¨å¹¶ä¸æ˜¯æ¨¡æ¿å¼•æ“ï¼Œè€Œæ˜¯(åˆ©ç”¨JavaScriptåŠ¨æ€åˆ›å»ºReactå…ƒç´ çš„)è¯­æ³•ç³–ã€‚**

### 2. åœ¨ JSX ä¸­ä½¿ç”¨è¡¨è¾¾å¼

1. JSX æœ¬èº«ä¹Ÿæ˜¯è¡¨è¾¾å¼

   ```jsx
   const element = <h1>hello, world!</h1>;
   //JSXå¯ä»¥åƒå…¶ä»–è¡¨è¾¾å¼ä¸€æ ·ï¼Œç”¨äºç»™ä¸€ä¸ªå˜é‡èµ‹å€¼ã€ä½œä¸ºå‡½æ•°å®å‚ã€ä½œä¸ºå‡½æ•°è¿”å›å€¼ç­‰ç­‰
   ```

2. è¡¨è¾¾å¼ä½œä¸ºå­å…ƒç´ 

   ```jsx
   const element = <li>{props.message}</li>;
   //å­å…ƒç´ æ˜¯Reactçš„ä¸€ä¸ªç‰¹æ®Šå±æ€§ï¼Œè¿™ä¸ªå±æ€§ä¼šä¼ ç»™ React.createElement çš„ childrenå‚æ•°
   //æ‰€ä»¥Reactè¦æ±‚è¿™ä¸ªå­å…ƒç´ çš„è¿”å›å€¼æ˜¯ä¸€ä¸ªå¯ render çš„èŠ‚ç‚¹(ç»„ä»¶Nodeã€åŸå§‹Nodeã€å­—ç¬¦ä¸²...)
   ```

3. åœ¨å±æ€§ä¸­ä½¿ç”¨è¡¨è¾¾å¼

   ```jsx
   <MyComponent size={100+500}/>
   //å¦‚æœè¦ç»™ç»„ä»¶ä¼ ä¸€ä¸ªå±æ€§çš„å€¼ï¼Œé‚£ä¹ˆè¿™ä¸ªå€¼å¯ä»¥æ˜¯ JavaScript è¡¨è¾¾å¼
   ```

4. å»¶å±•å±æ€§

   ```jsx
   const props = {name: 'mintnoii', age: '21'};
   const student = <Student {...props}/>;
   //å¦‚æœè¦ç»™ç»„ä»¶ä¼ ä¸€ç»„å±æ€§å€¼ï¼Œé‚£ä¹ˆå¯ä»¥ä½¿ç”¨ es6 çš„å»¶å±•æ“ä½œç¬¦æ¥å®ç°
   ```

[æ·±å…¥ React ä¸­çš„ JSX](https://zh-hans.reactjs.org/docs/jsx-in-depth.html#user-defined-components-must-be-capitalized) ğŸ‘ˆ

## 2. å…ƒç´ æ¸²æŸ“

### 1. å…ƒç´  != ç»„ä»¶

**å…ƒç´ (`elements`)æ˜¯æ„æˆ React åº”ç”¨çš„æœ€å°å•ä½ï¼Œå…ƒç´ æè¿°äº†æƒ³è¦åœ¨å±å¹•ä¸­å±•ç¤ºçš„å†…å®¹ã€‚**

```jsx
const element = <h1>Hello, world!</h1>;
```

> ä¸æµè§ˆå™¨çš„ DOM å…ƒç´ ä¸åŒï¼ŒReact å…ƒç´ æ˜¯åˆ›å»ºå¼€é”€æå°çš„æ™®é€šå¯¹è±¡ã€‚React DOM ä¼šè´Ÿè´£æ›´æ–° DOM æ¥ä¸ React å…ƒç´ ä¿æŒä¸€è‡´ã€‚

ä¸Šé¢æåˆ°äº†åˆ©ç”¨ JSX æ¥åˆ›å»º`Reactå…ƒç´ `ä»è€Œæ¥æ„å»ºç”¨æˆ·ç•Œé¢ UIã€‚

ä½†æ˜¯ âš ï¸æ³¨æ„ï¼šä¸è¦å°†å…ƒç´ ä¸å¦ä¸€ä¸ªè¢«ç†ŸçŸ¥çš„æ¦‚å¿µâ€”â€”â€œç»„ä»¶â€æ··æ·†ã€‚ğŸ—**ç»„ä»¶æ˜¯ç”±å…ƒç´ æ„æˆçš„ã€‚**

### 2. å°†ä¸€ä¸ªå…ƒç´ æ¸²æŸ“ä¸º DOM

Reactä¸­ï¼Œä½¿ç”¨`ReactDOM.render()`æ–¹æ³•æ¥å°† Reactå…ƒç´  æ¸²æŸ“è¿›ä¸€ä¸ª DOM ä¸­ã€‚

```jsx
<div id="root"></div> //â€æ ¹â€œ DOMèŠ‚ç‚¹

const element = <h1>Hello, world</h1>; //Reactå…ƒç´ 

ReactDOM.render(element, document.getElementById('root'));
//èŠ‚ç‚¹å†…çš„æ‰€æœ‰å†…å®¹éƒ½å°†ç”± React DOM ç®¡ç†
```

> ä»…ä½¿ç”¨ React æ„å»ºçš„åº”ç”¨é€šå¸¸åªæœ‰å•ä¸€çš„æ ¹ DOM èŠ‚ç‚¹ã€‚
>
> è€Œå¦‚æœå°† React é›†æˆè¿›ä¸€ä¸ªå·²æœ‰åº”ç”¨ï¼Œé‚£ä¹ˆä½ å¯ä»¥åœ¨åº”ç”¨ä¸­åŒ…å«ä»»æ„å¤šçš„ç‹¬ç«‹æ ¹ DOM èŠ‚ç‚¹ã€‚

### 3. React å…ƒç´ æ˜¯ä¸å¯å˜å¯¹è±¡

- React å…ƒç´ æ˜¯ä¸å¯å˜å¯¹è±¡ã€‚ä¸€æ—¦è¢«åˆ›å»ºï¼Œä½ å°±æ— æ³•æ›´æ”¹å®ƒçš„å­å…ƒç´ æˆ–è€…å±æ€§ã€‚ä¸€ä¸ªå…ƒç´ å°±åƒç”µå½±çš„å•å¸§ï¼šå®ƒä»£è¡¨äº†æŸä¸ªç‰¹å®šæ—¶åˆ»çš„ UIã€‚
- æ ¹æ®æˆ‘ä»¬å·²æœ‰çš„çŸ¥è¯†ï¼Œæ›´æ–° UI å”¯ä¸€çš„æ–¹å¼æ˜¯åˆ›å»ºä¸€ä¸ªå…¨æ–°çš„å…ƒç´ ï¼Œå¹¶å°†å…¶ä¼ å…¥ `ReactDOM.render()`ã€‚
- React DOM ä¼šå°†å…ƒç´ å’Œå®ƒçš„å­å…ƒç´ ä¸å®ƒä»¬ä¹‹å‰çš„çŠ¶æ€è¿›è¡Œæ¯”è¾ƒï¼Œå¹¶åªä¼šè¿›è¡Œå¿…è¦çš„æ›´æ–°æ¥ä½¿ DOM è¾¾åˆ°é¢„æœŸçš„çŠ¶æ€ã€‚

å¦‚æœéè¦ä½¿ç”¨å…ƒç´ æ¥æ„æˆå¯å˜åŒ–çš„ UI ç•Œé¢ï¼Œå°±éœ€è¦ä½¿ç”¨`setInterval`ç­‰å®šæ—¶å™¨å‡½æ•°æ¥ä¸åœçš„è°ƒç”¨
`ReactDOM.render`æ¥å®ç°äº†ã€‚

è€Œåœ¨å®é™…å¼€å‘ä¸­ï¼Œå¤§å¤šæ•° React åº”ç”¨åªä¼šè°ƒç”¨ä¸€æ¬¡`ReactDOM.render()`ï¼Œæ‰€ä»¥æ›´å¥½çš„æ–¹å¼æ˜¯ä½¿ç”¨`æœ‰çŠ¶æ€ç»„ä»¶`ã€‚

## 3. ç»„ä»¶&props

> ç»„ä»¶ï¼Œä»æ¦‚å¿µä¸Šç±»ä¼¼äº JavaScript å‡½æ•°ã€‚å®ƒæ¥å—ä»»æ„çš„å…¥å‚ï¼ˆå³ â€œpropsâ€ï¼‰ï¼Œå¹¶è¿”å›ç”¨äºæè¿°é¡µé¢å±•ç¤ºå†…å®¹çš„ React å…ƒç´ ã€‚

Reactä¸­æœ‰ä¸¤ç§å®šä¹‰ç»„ä»¶çš„æ–¹å¼ï¼š`å‡½æ•°å®šä¹‰`å’Œ`class ç±»å®šä¹‰`

### 1. å‡½æ•°ç»„ä»¶ä¸ class ç»„ä»¶

å®šä¹‰ç»„ä»¶æœ€ç®€å•çš„æ–¹å¼å°±æ˜¯ç¼–å†™ JavaScript å‡½æ•°ï¼š

```jsx
function Welcome (props) {
    return <h1>Hello, {props.name}</h1>;
}
```

å®ƒæ¥æ”¶å”¯ä¸€å¸¦æœ‰æ•°æ®çš„ â€œpropsâ€ï¼ˆä»£è¡¨å±æ€§ï¼‰å¯¹è±¡ä¸å¹¶è¿”å›ä¸€ä¸ª React å…ƒç´ ã€‚

è¿™ç±»ç»„ä»¶è¢«ç§°ä¸ºâ€œå‡½æ•°ç»„ä»¶â€ï¼Œå› ä¸ºå®ƒæœ¬è´¨ä¸Šå°±æ˜¯ JavaScript å‡½æ•°ã€‚

ä¹Ÿå¯ä»¥ä½¿ç”¨ ES6 çš„ class æ¥å®šä¹‰ç»„ä»¶ï¼š

```js
//Welcome ç±»ç»§æ‰¿è‡ª React.Compnent ç±»æ–¹æ³• 
class Welcome extends React.Component {
  render() {
    // this.propsä¸Šçš„å±æ€§æ˜¯ç”±å¤–éƒ¨è°ƒç”¨æ—¶ä¼ é€’è¿›æ¥çš„
    return <h1>Hello, {this.props.name}</h1>;
  }
}
```

è¿™ç§æ–¹å¼æ¯”èµ·`å‡½æ•°å®šä¹‰`çš„æ–¹å¼åˆ™æ›´åŠ çµæ´»ï¼ŒåŒæ—¶è¿˜æœ‰ä¸€äº›é¢å¤–ç‰¹æ€§ã€‚

### 2. Props çš„åªè¯»æ€§

> å½“ React å…ƒç´ ä¸ºç”¨æˆ·è‡ªå®šä¹‰ç»„ä»¶æ—¶ï¼Œå®ƒä¼šå°† JSX æ‰€æ¥æ”¶çš„å±æ€§ï¼ˆattributesï¼‰è½¬æ¢ä¸ºå•ä¸ªå¯¹è±¡ä¼ é€’ç»™ç»„ä»¶ï¼Œè¿™ä¸ªå¯¹è±¡è¢«ç§°ä¹‹ä¸º â€œpropsâ€ã€‚

```jsx
const element = <Welcome name="Sara" />;
//Reactå…ƒç´  element æ¥æ”¶ä¸€ä¸ª name å±æ€§

ReactDOM.render(
  element,
  document.getElementById('root')
);
```

1. æˆ‘ä»¬è°ƒç”¨ `ReactDOM.render()` å‡½æ•°ï¼Œå¹¶ä¼ å…¥ `<Welcome name="Sara" />` ä½œä¸ºå‚æ•°ã€‚
2. React è°ƒç”¨ `Welcome` ç»„ä»¶ï¼Œå¹¶å°† `{name: 'Sara'}` ä½œä¸º props ä¼ å…¥ã€‚
3. `Welcome` ç»„ä»¶å°† `<h1>Hello, Sara</h1>` å…ƒç´ ä½œä¸ºè¿”å›å€¼ã€‚
4. React DOM å°† DOM é«˜æ•ˆåœ°æ›´æ–°ä¸º `<h1>Hello, Sara</h1>`ã€‚

ä½†æ— è®ºç»„ä»¶æ˜¯ä½¿ç”¨ å‡½æ•°å£°æ˜ è¿˜æ˜¯é€šè¿‡ class å£°æ˜ï¼Œéƒ½å†³ä¸èƒ½ä¿®æ”¹è‡ªèº«çš„ propsã€‚

**æ‰€æœ‰ React ç»„ä»¶éƒ½å¿…é¡»åƒçº¯å‡½æ•°ä¸€æ ·ä¿æŠ¤å®ƒä»¬çš„ props ä¸è¢«æ›´æ”¹ã€‚**

> çº¯å‡½æ•°ï¼šå‡½æ•°ä½“å†…ä¸ä¼šå°è¯•æ›´æ”¹å…¥å‚ï¼Œä¸”å¤šæ¬¡è°ƒç”¨ä¸‹ç›¸åŒçš„å…¥å‚å§‹ç»ˆè¿”å›ç›¸åŒçš„ç»“æœã€‚

## 4. State&ç”Ÿå‘½å‘¨æœŸ

ä¹‹å‰çš„å…ƒç´ æ¸²æŸ“éƒ¨åˆ†ï¼Œæˆ‘ä»¬äº†è§£åˆ°ä¸€ç§æ›´æ–° UI ç•Œé¢çš„æ–¹æ³•ã€‚å³é€šè¿‡è°ƒç”¨ `ReactDOM.render()` æ¥ä¿®æ”¹æˆ‘ä»¬æƒ³è¦æ¸²æŸ“çš„å…ƒç´ ã€‚åŒæ—¶ä¹Ÿæåˆ°ï¼Œå¦‚æœè€ƒè™‘ä¸€ä¸ªå®šæ—¶å™¨ç»„ä»¶çš„å®ç°ï¼Œé‡å¤è°ƒç”¨`ReactDOM.render()`æ¥æ¸²æŸ“é¡µé¢çš„æ–¹æ³•æ˜¯ä¸å¯å–çš„ï¼Œæ›´å¥½çš„æ–¹æ¡ˆæ˜¯ä½¿ç”¨`æœ‰çŠ¶æ€ç»„ä»¶`ã€‚è€Œä¸Šé¢ä»‹ç»ç±»å®šä¹‰ç»„ä»¶æ—¶ï¼Œæˆ‘ä»¬äº†è§£åˆ°ä½¿ç”¨`ç±»å®šä¹‰ç»„ä»¶`æœ‰ä¸€äº›é¢å¤–çš„å¥½å¤„ï¼Œæ‹¥æœ‰`ç§æœ‰çŠ¶æ€`è¿™ä¸€ç‰¹æ€§å°±æ˜¯å…¶ä¸­ä¹‹ä¸€ã€‚

### 1. æ­£ç¡®åœ°ä½¿ç”¨ state

> State ä¸ props ç±»ä¼¼ï¼Œä½†æ˜¯ state æ˜¯ç§æœ‰çš„ï¼Œå¹¶ä¸”å®Œå…¨å—æ§äºå½“å‰ç»„ä»¶ã€‚
>
> å¦‚æœæŸäº›æ•°æ®å¯ä»¥ç”± props æˆ– state æ¨å¯¼å¾—å‡ºï¼Œé‚£ä¹ˆå®ƒå°±ä¸åº”è¯¥å­˜åœ¨äº state ä¸­ã€‚
>
> state å…è®¸ React ç»„ä»¶éšç”¨æˆ·æ“ä½œã€ç½‘ç»œå“åº”æˆ–è€…å…¶ä»–å˜åŒ–è€ŒåŠ¨æ€æ›´æ”¹è¾“å‡ºå†…å®¹ã€‚

```jsx
class Clock extends React.Component {
  constructor(props) {
    //Class ç»„ä»¶åº”è¯¥å§‹ç»ˆä½¿ç”¨ props å‚æ•°æ¥è°ƒç”¨çˆ¶ç±»çš„æ„é€ å‡½æ•°ã€‚
    super(props);
    
    //åˆå§‹åŒ–çŠ¶æ€
    this.state = {
      date: new Date()
    };
  }

  componentDidMount() {
    this.timerID = setInterval(
      () => this.tick(),
      1000
    );
  }

  componentWillUnmount() {
    clearInterval(this.timerID);
  }

  tick() {
    //this.state.date = new Date() âŒ
    this.setState({
      date: new Date()
    });
  }
  
	// render() æ–¹æ³•ç”¨æ¥è¿”å›éœ€è¦å‘ˆç°çš„ç»„ä»¶å†…å®¹
  render() {
    //ä½¿ç”¨this.state.xxxæ¥å¼•ç”¨ä¸€ä¸ªçŠ¶æ€å±æ€§
    return (
      <div>
        <h1>Hello, world!</h1>
        <h2>It is {this.state.date.toLocaleTimeString()}.</h2>
      </div>
    );
  }
}

ReactDOM.render(
  //æ— éœ€ä¼ å…¥ propsï¼Œç»„ä»¶å®ç°äº†è‡ªæˆ‘æ›´æ–°
  <Clock />,
  document.getElementById('root')
);
```

æƒ³æ­£ç¡®åœ°ä½¿ç”¨ stateï¼Œå°±è¦ç‰¢è®°ä¸‹é¢ä¸‰ç‚¹ï¼š

âš ï¸**1. ä¸è¦ç›´æ¥ä¿®æ”¹State** 

æ„é€ å‡½æ•°(constructor)æ˜¯å”¯ä¸€å¯ä»¥ç»™ `this.state` èµ‹å€¼çš„åœ°æ–¹ã€‚

æ‰€ä»¥åœ¨å…¶ä»–å‡½æ•°(tickæ–¹æ³•ğŸ‘†)é‡Œä¸èƒ½ç›´æ¥ä½¿ç”¨`this.state.xxx = xxx`çš„æ–¹å¼æ¥æ”¹å˜ä¸€ä¸ª`state`çš„å€¼ï¼Œè€Œåº”è¯¥ä½¿ç”¨`this.setState()`æ–¹æ³•ã€‚

å…³äºè¿™ä¸ªæ–¹æ³•çš„è¯¦ç»†ä¿¡æ¯ï¼š[setState()  API](https://zh-hans.reactjs.org/docs/react-component.html#setstate) ğŸ‘ˆ

âš ï¸**2. State çš„æ›´æ–°å¯èƒ½æ˜¯å¼‚æ­¥çš„**

`this.setState()`ä¼šè‡ªåŠ¨è¦†ç›–`this.state`é‡Œç›¸åº”çš„å±æ€§ï¼Œå¹¶è§¦å‘`render()`é‡æ–°æ¸²æŸ“ç»„ä»¶ã€‚

æ‰€ä»¥å‡ºäºæ€§èƒ½è€ƒè™‘ï¼ŒReact å¯èƒ½ä¼šæŠŠå¤šä¸ª `setState()` è°ƒç”¨åˆå¹¶æˆä¸€ä¸ªè°ƒç”¨ã€‚

**å› ä¸º `this.props` å’Œ `this.state` å¯èƒ½ä¼šå¼‚æ­¥æ›´æ–°ï¼Œæ‰€ä»¥ä¸èƒ½ä¾èµ–ä»–ä»¬çš„å€¼æ¥æ›´æ–°ä¸‹ä¸€ä¸ªçŠ¶æ€ã€‚**

ä¾‹å¦‚ï¼Œæ­¤ä»£ç å¯èƒ½ä¼šæ— æ³•æ›´æ–°è®¡æ•°å™¨ï¼š

```jsx
// Wrong
this.setState({
  counter: this.state.counter + this.props.increment,
});

// Correct
this.setState((state, props) => ({
  counter: state.counter + props.increment
}));
```

> è¦è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå¯ä»¥è®© `setState()` æ¥æ”¶ä¸€ä¸ªå‡½æ•°è€Œä¸æ˜¯ä¸€ä¸ªå¯¹è±¡ã€‚
>
> è¿™ä¸ªå‡½æ•°ç”¨ä¸Šä¸€ä¸ª state ä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°ï¼Œå°†æ­¤æ¬¡æ›´æ–°è¢«åº”ç”¨æ—¶çš„ props åšä¸ºç¬¬äºŒä¸ªå‚æ•°ã€‚

âš ï¸**3. State çš„æ›´æ–°ä¼šè¢«åˆå¹¶**

å½“ä½ è°ƒç”¨ `setState()` çš„æ—¶å€™ï¼ŒReact ä¼šæŠŠä½ æä¾›çš„å¯¹è±¡åˆå¹¶(æµ…åˆå¹¶)åˆ°å½“å‰çš„ stateã€‚

### 2. å•å‘æ•°æ®æµ

- å¯¹ä¸€ä¸ªç»„ä»¶æ¥è¯´ï¼Œä¸ç®¡æ˜¯å®ƒçš„çˆ¶ç»„ä»¶è¿˜æ˜¯å­ç»„ä»¶å®ƒä»¬éƒ½æ— æ³•çŸ¥é“è¿™ä¸ªç»„ä»¶æ˜¯æœ‰çŠ¶æ€çš„è¿˜æ˜¯æ— çŠ¶æ€çš„ï¼Œå¹¶ä¸”å®ƒä»¬ä¹Ÿå¹¶ä¸å…³å¿ƒå®ƒæ˜¯å‡½æ•°ç»„ä»¶è¿˜æ˜¯ class ç»„ä»¶ã€‚

- è¿™å°±æ˜¯ä¸ºä»€ä¹ˆç§°`state`ä¸ºå±€éƒ¨çš„æˆ–æ˜¯å°è£…çš„çš„åŸå› ã€‚é™¤äº†æ‹¥æœ‰å¹¶è®¾ç½®äº†å®ƒçš„ç»„ä»¶ï¼Œå…¶ä»–ç»„ä»¶éƒ½æ— æ³•è®¿é—®ã€‚
- è¿™ä¸ªç»„ä»¶å¯ä»¥é€‰æ‹©æŠŠå®ƒçš„`state`ä½œä¸º`props`ç»§ç»­å‘ä¸‹ä¼ é€’åˆ°å®ƒçš„å­ç»„ä»¶ä¸­ã€‚è€Œå­ç»„ä»¶ä¼šåœ¨`props`ä¸­æ¥å—æ•°æ®ï¼Œä½†å®ƒæ— æ³•çŸ¥é“ä¼ é€’è¿›æ¥çš„æ•°æ®æ˜¯æ¥è‡ªçˆ¶ç»„ä»¶çš„`props`è¿˜æ˜¯`state`ï¼Œæˆ–è€…æ˜¯æ‰‹åŠ¨è¾“å…¥çš„ã€‚

> ğŸ—¿**æ€»ç»“ï¼šè¿™é€šå¸¸ä¼šè¢«å«åšâ€œè‡ªä¸Šè€Œä¸‹â€æˆ–æ˜¯â€œå•å‘â€çš„æ•°æ®æµã€‚ä»»ä½•çš„ state æ€»æ˜¯æ‰€å±äºç‰¹å®šçš„ç»„ä»¶ï¼Œè€Œä¸”ä»è¯¥ state æ´¾ç”Ÿçš„ä»»ä½•æ•°æ®æˆ– UI åªèƒ½å½±å“æ ‘ä¸­â€œä½äºâ€å®ƒä»¬çš„ç»„ä»¶ã€‚**
>
> ğŸ‘**å®˜ç½‘çš„è¿™ä¸ªæ¯”å–»ååˆ†ç”ŸåŠ¨ï¼š**
>
> **å¦‚æœä½ æŠŠä¸€ä¸ªä»¥ç»„ä»¶æ„æˆçš„æ ‘æƒ³è±¡æˆä¸€ä¸ª props çš„æ•°æ®ç€‘å¸ƒçš„è¯ï¼Œé‚£ä¹ˆæ¯ä¸€ä¸ªç»„ä»¶çš„ state å°±åƒæ˜¯åœ¨ä»»æ„ä¸€ç‚¹ä¸Šç»™ç€‘å¸ƒå¢åŠ é¢å¤–çš„æ°´æºï¼Œä½†æ˜¯å®ƒåªèƒ½å‘ä¸‹æµåŠ¨ã€‚**

### 3. ç»„ä»¶ç”Ÿå‘½å‘¨æœŸ

åœ¨å‰é¢çš„ `Clock` ç»„ä»¶ä¸­ï¼Œæˆ‘ä»¬åœ¨`componentDidMount()`ä¸­è®¾ç½®äº†å®šæ—¶å™¨ï¼Œè¯¥æ–¹æ³•ä¼šåœ¨ç»„ä»¶ UI å·²ç»è¢«æ¸²æŸ“åˆ° DOM ä¸­(æŒ‚è½½ mount )åè°ƒç”¨ã€‚å®ƒåªä¼šæ‰§è¡Œä¸€æ¬¡ï¼Œå…¸å‹çš„åº”ç”¨åœºæ™¯å°±æ˜¯åœ¨è¿™ä¸ªæ–¹æ³•é‡Œè¿›è¡Œæ•°æ®è¯·æ±‚ï¼Œè·å–å¤–éƒ¨èµ„æºã€‚

åŒæ ·ï¼Œæˆ‘ä»¬åœ¨`componentWillUnmount()`ä¸­æ¸…é™¤äº†å®šæ—¶å™¨ã€‚ä¸€æ—¦ç»„ä»¶ä» DOM ä¸­è¢«ç§»é™¤(å¸è½½ unmount )ï¼ŒReact å°±ä¼šè°ƒç”¨è¿™ä¸ªç”Ÿå‘½å‘¨æœŸæ–¹æ³•ã€‚å…¸å‹çš„åº”ç”¨åœºæ™¯å°±æ˜¯é‡Šæ”¾èµ„æºã€‚

React çš„`componentDidUpdate()`ä¹Ÿæ˜¯ä¸€ä¸ªå¸¸ç”¨çš„ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ã€‚

æ­¤å¤–ï¼Œ`render()`æ–¹æ³•ä¹Ÿæ˜¯ React ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ï¼Œè¿™ä¹Ÿæ˜¯ç»„ä»¶å”¯ä¸€å¿…é¡»å®šä¹‰çš„ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ã€‚

å…³äºç»„ä»¶ç”Ÿå‘½å‘¨æœŸè¿™éƒ¨åˆ†çš„è¯¦ç»†ä¿¡æ¯çœ‹ä¸‹é¢çš„é“¾æ¥ï¼š

[React ä¸­çš„ç”Ÿå‘½å‘¨æœŸAPI](https://zh-hans.reactjs.org/docs/react-component.html#the-component-lifecycle)ğŸ‘ˆ

[Reactç”Ÿå‘½å‘¨æœŸå›¾è°±é€ŸæŸ¥è¡¨](http://projects.wojtekmaj.pl/react-lifecycle-methods-diagram/)ğŸ‘ˆ

## 5. äº‹ä»¶å¤„ç†

### 1. æ³¨æ„è¯­æ³•çš„åŒºåˆ«

React å…ƒç´ çš„äº‹ä»¶å¤„ç†å’Œ DOM å…ƒç´ çš„å¾ˆç›¸ä¼¼ï¼Œä½†æ˜¯æœ‰ä¸€ç‚¹è¯­æ³•ä¸Šçš„ä¸åŒ:

- React äº‹ä»¶é‡‡ç”¨`camelCase`å°é©¼å³°å¼å‘½å(`onClick`ï¼‰ï¼Œè€Œä¸æ˜¯çº¯å°å†™(`onclick`)ã€‚
- ä½¿ç”¨ JSX è¯­æ³•æ—¶ä½ éœ€è¦ä¼ å…¥ä¸€ä¸ªå‡½æ•°ä½œä¸ºäº‹ä»¶å¤„ç†å‡½æ•°ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ã€‚

```jsx
//ä¼ ç»Ÿ HTML
<button onclick="handleClick()">Click me</button>

//React
<button onClick={increment}>Click me</button>
```

è¿˜æœ‰ä¸€ä¸ªä¸åŒåœ¨äºï¼Œåœ¨åŸç”ŸDOMä¸­ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡è¿”å›`false`æ¥é˜»æ­¢é»˜è®¤è¡Œä¸ºï¼Œä½†æ˜¯è¿™åœ¨Reactä¸­æ˜¯è¡Œä¸é€šçš„ï¼Œåœ¨Reactä¸­éœ€è¦æ˜ç¡®ä½¿ç”¨`preventDefault()`æ¥é˜»æ­¢é»˜è®¤è¡Œä¸ºã€‚

ä¸¾ä¸ªæ —å­ğŸŒ°ï¼š

```jsx
//ä¼ ç»Ÿ HTML
<a href="#" onclick="console.log('The link was clicked.'); return false">
  Click me
</a>

//React
function ActionLink () {
    function handleClick (event) {
        event.preventDefault();
        alert('Hello, world!');
    }

    return (
        <a href="#" onClick={handleClick}>Click me</a>
    );
}
```

è¿™é‡Œäº‹ä»¶å›è°ƒå‡½æ•°é‡Œçš„`event`æ˜¯ç»è¿‡ React æ ¹æ® W3C è§„èŒƒå®šä¹‰çš„ä¸€ä¸ªåˆæˆäº‹ä»¶ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥æ”¾å¿ƒåœ°ä½¿ç”¨å®ƒè€Œä¸ç”¨æ‹…å¿ƒè·¨æµè§ˆå™¨çš„å…¼å®¹æ€§é—®é¢˜ã€‚

### 2. æ³¨æ„ this æŒ‡å‘é—®é¢˜

å½“æˆ‘ä»¬ä½¿ç”¨ ES6 class ç±»å®šä¹‰ç»„ä»¶æ—¶ï¼Œé€šå¸¸çš„åšæ³•æ˜¯å°†äº‹ä»¶å¤„ç†å‡½æ•°å£°æ˜ä¸º class ä¸­çš„æ–¹æ³•ã€‚

âš ï¸ä½†è¿™æ ·ä¸€æ¥ï¼Œæˆ‘ä»¬éœ€è¦ç‰¹åˆ«æ³¨æ„ JSX å›è°ƒå‡½æ•°ä¸­çš„ `this`ã€‚

å› ä¸ºåœ¨ class ç»„ä»¶é‡Œï¼Œ**é™¤äº†æ„é€ å‡½æ•°å’Œç”Ÿå‘½å‘¨æœŸé’©å­å‡½æ•°é‡Œä¼šè‡ªåŠ¨ç»‘å®š this ä¸ºå½“å‰ç»„ä»¶å¤–ï¼Œå…¶ä»–çš„éƒ½ä¸ä¼šè‡ªåŠ¨ç»‘å®š this çš„æŒ‡å‘ä¸ºå½“å‰ç»„ä»¶**ã€‚

å¦‚æœä½ åœ¨ JSX é‡Œå¿˜è®°å°† this ç»‘å®šåˆ° `this.handleClick` å¹¶æŠŠå®ƒä¼ å…¥äº† `onClick`ï¼Œé‚£ä¹ˆå½“ä½ è°ƒç”¨è¿™ä¸ªå‡½æ•°çš„æ—¶å€™ `this` çš„å€¼ä¸º `undefined`ã€‚(è¿™å’Œ ES6 é‡Œ Class çš„ this æŒ‡å‘ä»¥åŠ JS å‡½æ•°å·¥ä½œåŸç†æœ‰å…³ï¼Œå¹¶ä¸æ˜¯ React ç‹¬æœ‰çš„é—®é¢˜ï¼‰

```jsx
 <button onClick={this.handleClick.bind(this)}>Click me</button>
```

 å¦‚æœè§‰å¾—ä¸Šé¢è¿™æ ·æ¯æ¬¡éƒ½è¦å†™`.bind(this)`å¾ˆéº»çƒ¦ï¼Œå¯ä»¥ä½¿ç”¨ ES6 ç®­å¤´å‡½æ•°æ¥è¿›è¡Œéšå¼ç»‘å®š thisï¼š

```jsx
<button onClick={(e) => this.handleClick(e)}>Click me </button>
```

ä½†å…¶å®è¿™ä¸¤ç§æ–¹æ³•éƒ½æœ‰ä¸€ä¸ªæ½œåœ¨çš„æ€§èƒ½é—®é¢˜(å®é™…ä¸Šç”±æ­¤å¼•å‘çš„æ€§èƒ½é—®é¢˜å¾€å¾€ä¸å€¼ä¸€æ)ï¼šğŸ‘»

**å½“ç»„ä»¶æ¯æ¬¡é‡æ–°æ‰§è¡Œ`render()`æ¸²æŸ“æ—¶ï¼Œéƒ½ä¼šæœ‰ä¸€ä¸ªæ–°çš„å‡½æ•°åˆ›å»ºã€‚å¦‚æœè¯¥å›è°ƒå‡½æ•°ä½œä¸º `prop` ä¼ å…¥å­ç»„ä»¶æ—¶ï¼Œè¿™äº›ç»„ä»¶å¯èƒ½ä¼šè¿›è¡Œé¢å¤–çš„é‡æ–°æ¸²æŸ“ã€‚**

ğŸ˜è€Œæˆ‘ä»¬æœ‰æ›´å¥½çš„æ–¹æ³•å°±æ˜¯å¯ä»¥**åœ¨ç»„ä»¶çš„ constructor é‡Œç»Ÿä¸€ä¸ºå›è°ƒæ–¹æ³•ç»‘å®š this æŒ‡å‘**ï¼Œå¦‚ï¼š

```jsx
class Toggle extends React.Component {
  constructor(props) {
    super(props);
    this.state = {isToggleOn: true};

    // ä¸ºäº†åœ¨å›è°ƒä¸­ä½¿ç”¨ thisï¼Œè¿™ä¸ªç»‘å®šæ˜¯å¿…ä¸å¯å°‘çš„
    this.handleClick = this.handleClick.bind(this);
  }

  handleClick() {
    this.setState(state => ({
      isToggleOn: !state.isToggleOn
    }));
  }

  render() {
    return (
      <button onClick={this.handleClick}>
        {this.state.isToggleOn ? 'ON' : 'OFF'}
      </button>
    );
  }
}
```

ä½†å°±å®é™…ç¼–ç¨‹ä½“éªŒè€Œè¨€ï¼Œè¿™ç§æ–¹å¼ä¸å¦‚ä¸Šé¢ä¸¤ç§å†™æ³•ç®€æ˜æ‰¼è¦ï¼Œå¾€å¾€è¦å†™å¾ˆå¤šé‡å¤ä»£ç ã€‚åœ¨å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§ä¸Šä¹Ÿæœ‰äº›æ¬ ç¼ºã€‚åŒæ—¶ï¼Œåœ¨ constructor å†…å£°æ˜çš„æ–¹æ³•ä¸ä¼šå­˜åœ¨å®ä¾‹çš„åŸå‹ä¸Šï¼Œè€Œå±äºå®ä¾‹æœ¬èº«ã€‚å¦‚æ­¤ä¸€æ¥ï¼Œæ¯ä¸ªå®ä¾‹éƒ½æœ‰ä¸€ä¸ªåŒæ ·çš„ handleClickï¼Œè¿™ä¹Ÿæ˜¯ä¸€ç§é‡å¤å’Œæµªè´¹ã€‚

æ­¤å¤–ï¼Œå¦‚æœä½ æ‹¥æŠ± ES next ä¸”èƒ½å¤Ÿä½¿ç”¨ stage-2 çš„æ–°ç‰¹æ€§(å®éªŒæ€§çš„ğŸ¤–)ï¼Œé‚£ä¹ˆä½ è¿˜å¯ä»¥**åœ¨å®šä¹‰é˜¶æ®µä½¿ç”¨ç®­å¤´å‡½æ•°ç»‘å®š**æ¥æ­£ç¡®çš„ç»‘å®š thisï¼Œå¦‚ï¼š

```jsx
class Counter extends React.Component {
    // æ­¤è¯­æ³•ç¡®ä¿ `handleClick` å†…çš„ `this` å·²è¢«ç»‘å®šã€‚
    handleClick = () => {
      console.log('this is:', this);
    	this.setState(state => ({
       isToggleOn: !state.isToggleOn
    }));
    // ...
}
```

ä½¿ç”¨è¿™ç§æ–¹å¼çš„ä¼˜ç‚¹ï¼š

- ä½¿ç”¨ç®­å¤´å‡½æ•°ï¼Œæœ‰æ•ˆç»‘å®šäº† this
- æ²¡æœ‰åœ¨ JSX å†…ç»‘å®šçš„æ½œåœ¨æ€§èƒ½é—®é¢˜
- é¿å…äº† constrcutor å†…ç»‘å®šçš„ç»„ä»¶å®ä¾‹é‡å¤é—®é¢˜

### 3. å‘äº‹ä»¶å‡½æ•°ä¼ é€’å‚æ•°

é€šå¸¸æˆ‘ä»¬ä¼šä¸ºäº‹ä»¶å¤„ç†å‡½æ•°ä¼ é€’é¢å¤–çš„å‚æ•°ï¼Œæ–¹å¼æœ‰ä»¥ä¸‹ä¸¤ç§ï¼š

```jsx
//ä½¿ç”¨ç®­å¤´å‡½æ•°(ä¸æ¨è)
<button onClick={(e) => this.deleteRow(id, e)}>Delete Row</button>
//bindç»‘å®š
<button onClick={this.deleteRow.bind(this, id)}>Delete Row</button>
```

- å…³äºäº‹ä»¶å‚å¯¹è±¡ eventï¼Œåœ¨ä½¿ç”¨ç®­å¤´å‡½æ•°çš„æƒ…å†µä¸‹ï¼Œå‚æ•°`e`è¦æ˜¾å¼ä¼ é€’ï¼Œè€Œä½¿ç”¨ bind çš„æƒ…å†µä¸‹ï¼Œäº‹ä»¶å¯¹è±¡ä»¥åŠæ›´å¤šçš„å‚æ•°å°†ä¼šè¢«éšå¼çš„è¿›è¡Œä¼ é€’ã€‚
- ç”±ä¸Šé¢çš„ this æŒ‡å‘é—®é¢˜å¯çŸ¥ï¼Œæ›´å¥½çš„æ–¹å¼æ˜¯åœ¨ constructor å†…ç»‘å®š this åï¼Œåœ¨äº‹ä»¶å‡½æ•°è°ƒç”¨æ—¶ç›´æ¥ä¼ é€’å‚æ•°`onClick={this.deleteRow.bind(id)}`

## 6. æ¡ä»¶æ¸²æŸ“

> åœ¨ React ä¸­ï¼Œä½ å¯ä»¥åˆ›å»ºä¸åŒçš„ç»„ä»¶æ¥å°è£…å„ç§ä½ éœ€è¦çš„è¡Œä¸ºã€‚ç„¶åï¼Œä¾æ®åº”ç”¨çš„ä¸åŒçŠ¶æ€ï¼Œä½ å¯ä»¥åªæ¸²æŸ“å¯¹åº”çŠ¶æ€ä¸‹çš„éƒ¨åˆ†å†…å®¹ã€‚

```jsx
//ä»£ç å¹¶ä¸ä¼˜é›…ï¼Œä»…åšdemo
function UserLogin(props) {
    const isLogined = props.isLogined;
 		const isVip = props.isVip;
  	const isQbVip = props.isQbVip; //ç©·b vip
  	var welcome
  	if (isLogined) {	
      //å­˜å‚¨ react å…ƒç´ 
      welcome = <span>æ¬¢è¿,å°Šæ•¬çš„vipç”¨æˆ·{isQbVip && <a>è¯·å°½å¿«å‡çº§ä¸ºæ­£å¼Vip!</a>}</span>
        return <button>{isVip ? welcome: ''}é€€å‡º</button>
    } else {
        return <button>ç™»é™†</button>
    }
}
```

- ä½¿ç”¨å˜é‡å­˜å‚¨ React å…ƒç´ ï¼Œå¸®åŠ©æˆ‘ä»¬æœ‰æ¡ä»¶åœ°æ¸²æŸ“ç»„ä»¶çš„ä¸€éƒ¨åˆ†ï¼Œè€Œå…¶ä»–çš„æ¸²æŸ“éƒ¨åˆ†å¹¶ä¸ä¼šå› æ­¤è€Œæ”¹å˜ã€‚
- å¯ä»¥ä½¿ç”¨ if è¯­å¥è¿›è¡Œæ¡ä»¶æ¸²æŸ“æˆ–è€…åœ¨ JSX å†…ä½¿ç”¨æ›´ç®€æ´çš„æ¡ä»¶è¿ç®—ç¬¦
- å¦‚æœæ¡ä»¶æ˜¯ `true`ï¼Œ`&&` å³ä¾§çš„å…ƒç´ å°±ä¼šè¢«æ¸²æŸ“ï¼Œå¦‚æœæ˜¯ `false`ï¼ŒReact ä¼šå¿½ç•¥å¹¶è·³è¿‡å®ƒã€‚
- åœ¨è¾ƒå¤æ‚çš„è¡¨è¾¾å¼ä¸­ä½¿ç”¨ä¸‰å…ƒè¿ç®—ç¬¦ä¼šä½¿ä»£ç ç»“æ„ä¸å¤ªç›´è§‚ï¼Œæ­¤æ—¶åº”è¯¥è€ƒè™‘æå–ç»„ä»¶ã€‚

> åœ¨æå°‘æ•°æƒ…å†µä¸‹ï¼Œä½ å¯èƒ½å¸Œæœ›èƒ½éšè—ç»„ä»¶ï¼Œå³ä½¿å®ƒå·²ç»è¢«å…¶ä»–ç»„ä»¶æ¸²æŸ“ã€‚è‹¥è¦å®Œæˆæ­¤æ“ä½œï¼Œä½ å¯ä»¥è®© `render` æ–¹æ³•ç›´æ¥è¿”å› `null`ï¼Œè€Œä¸è¿›è¡Œä»»ä½•æ¸²æŸ“ã€‚
>
> **æ³¨æ„ï¼š** åœ¨ç»„ä»¶çš„`render`æ–¹æ³•ä¸­è¿”å›`null`å¹¶ä¸ä¼šå½±å“ç»„ä»¶ç”Ÿå‘½å‘¨æœŸå‡½æ•°çš„è§¦å‘ï¼Œå¦‚`componentWillUpdate`å’Œ`componentDidUpdate`ç­‰ä»ç„¶ä¼šè¢«è°ƒç”¨ã€‚

## 7. åˆ—è¡¨ & Key

### 1. åˆ—è¡¨æ¸²æŸ“

åœ¨ React é‡Œï¼Œæˆ‘ä»¬æ˜¯ä½¿ç”¨`map()`æ–¹æ³•æ¥å°†æ•°ç»„é¡¹è¿›è¡Œåˆ—è¡¨æ¸²æŸ“çš„ï¼š

```jsx
function TodoList (props) {
    const todos = props.todos;
    const TodoItems = todos.map(item => {
        return (
            <li>{item}</li>
        )
    });
    return <ul>{TodoItems}</ul>
}
```

å½“æˆ‘ä»¬è¿è¡Œä»¥ä¸Šçš„ä»£ç çš„æ—¶å€™ï¼Œä¼šå‘ç°æ§åˆ¶å°æç¤ºï¼š`Each child in an array or iterator should have a unique "key" prop`ï¼Œæ„æ€æ˜¯å½“ä½ åˆ›å»ºä¸€ä¸ªå…ƒç´ æ—¶ï¼Œå¿…é¡»åŒ…æ‹¬ä¸€ä¸ªç‰¹æ®Šçš„ `key` å±æ€§ã€‚

### 2.  Key å±æ€§çš„ä½œç”¨

å¼„æ¸…æ¥š`key`å±æ€§çš„ä½œç”¨ä¹‹å‰ï¼Œå…ˆäº†è§£ä¸€ä¸‹ React ä¸­ JSX çš„è¿è¡ŒåŸºç¡€ Virtual Dom ï¼š

> åœ¨ React ç»„ä»¶å†…éƒ¨ï¼Œå®ƒç»´æŠ¤äº†ä¸€å¥—è™šæ‹Ÿ Dom çš„çŠ¶æ€ã€‚è¿™å¥—è™šæ‹ŸçŠ¶æ€æ ‘æœ€ç»ˆä¼šæ˜ å°„åˆ°çœŸå®çš„ DOM èŠ‚ç‚¹ä¸Šã€‚å½“è™šæ‹Ÿ DOM çš„çŠ¶æ€å‘ç”Ÿå˜åŒ–çš„æ—¶å€™ï¼Œ å®ƒéœ€è¦å»è®¡ç®—å‰åä¸¤ä¸ªè™šæ‹Ÿ DOM ä¹‹é—´çš„åŒºåˆ«ï¼Œå¹¶äº§ç”Ÿä¸€ä¸ª Diffã€‚æœ€ç»ˆåœ¨çœŸå®çš„ DOM èŠ‚ç‚¹ä¸Šå¹¶ä¸æ˜¯æ•´ä½“åˆ·æ–°æ‰€æœ‰ DOMï¼Œè€Œæ˜¯æŠŠ Diff çš„éƒ¨åˆ†é€šè¿‡é«˜æ•ˆåœ°æ–¹å¼æ›´æ–°åˆ° UI ä¸Šï¼Œä»è€Œèƒ½å¤Ÿä¿è¯æ€§èƒ½ã€‚

ä»¥åŠå®ƒçš„ `Diffç®—æ³•`ï¼ˆå¤æ‚åº¦O(n) ï¼‰çš„å·¥ä½œåŸç†ï¼š

1. å½“å‰åä¸¤ä¸ªè™šæ‹ŸèŠ‚ç‚¹çš„ DOM æ ‘å‘ç”Ÿå˜åŒ–ä¹‹åï¼ŒReact çš„ Diff ç®—æ³•ä¼šä»å®ƒä»¬çš„æ ¹èŠ‚ç‚¹å¼€å§‹  ä¸€å±‚å±‚åœ°æ¯”è¾ƒï¼Œå³**å¹¿åº¦ä¼˜å…ˆçš„åˆ†å±‚æ¯”è¾ƒ**ã€‚
2. å¦‚æœåŒä¸€å±‚é‡Œçš„èŠ‚ç‚¹é¡ºåºå‘ç”Ÿå˜åŒ–ï¼Œç®—æ³•ä¼šè¦æ±‚èŠ‚ç‚¹éƒ½å¿…é¡»æœ‰å”¯ä¸€çš„æ ‡è¯†ï¼Œç„¶åæ‰èƒ½äº¤æ¢èŠ‚ç‚¹çš„ä½ç½®ã€‚
3. å¦‚æœæ˜¯èŠ‚ç‚¹çš„ç±»å‹å‘ç”Ÿå˜åŒ–ï¼Œåˆ™ React ä¼šç®€å•ç²—æš´çš„å°†æ—§ç±»å‹çš„èŠ‚ç‚¹åˆ æ‰ï¼ˆä¸ä¼šæ£€æŸ¥æ˜¯å¦åœ¨è¯¥DOM æ ‘çš„å…¶ä»–ä½ç½®ä¹Ÿæœ‰ä¸€æ ·çš„èŠ‚ç‚¹ï¼‰ï¼Œç„¶ååˆ›å»ºä¸€ä¸ªæ–°ç±»å‹çš„èŠ‚ç‚¹ã€‚
4. DOM èŠ‚ç‚¹çš„è·¨å±‚ç§»åŠ¨ï¼Œè¿™ç§æƒ…å†µä¸‹ diff ç®—æ³•åªä¼šå°†å‘ç”Ÿä½ç½®å˜åŒ–çš„èŠ‚ç‚¹åŠå…¶å­å…ƒç´ æ•´ä¸ªä¸€èµ·åˆ é™¤æ‰ï¼Œåç»­åœ¨æ–°ä½ç½®ä¸Šé‡æ–°åˆ›å»ºè¿™ä¸ªèŠ‚ç‚¹åŠå…¶å­å…ƒç´  (ä¹Ÿå°±æ˜¯ä¸ä¼šè¿›è¡Œâ€å‰ªåˆ‡â€œå’Œâ€ç²˜è´´â€œæ“ä½œ)ã€‚

React ä¹‹æ‰€ä»¥ä¸å¯¹å‘ç”Ÿç§»åŠ¨çš„èŠ‚ç‚¹è¿›è¡Œâ€å‰ªåˆ‡å’Œç²˜è´´â€œï¼Œè€Œç›´æ¥æ”¾å¼ƒæ£€æŸ¥æ˜¯å› ä¸ºè¿™ä¸ªç®—æ³•çš„å®ç°åŸºäºä¸¤ä¸ªå‡è®¾ï¼š

- ç»„ä»¶çš„ DOM ç»“æ„æ˜¯ç›¸å¯¹ç¨³å®šçš„ã€‚(å¾ˆå°‘å‘ç”ŸèŠ‚ç‚¹è·¨å±‚ç§»åŠ¨)
- ç±»å‹ç›¸åŒçš„å…„å¼ŸèŠ‚ç‚¹å¯ä»¥è¢«å”¯ä¸€æ ‡è¯†ã€‚ï¼ˆä¸»è¦ç”¨åœ¨åŒä¸€å±‚çš„èŠ‚ç‚¹é¡ºåºä¸ä½ç½®å‘ç”Ÿå˜åŒ–çš„åœºæ™¯ ï¼‰

ğŸ”‘æ­£å› ä¸º Diff ç®—æ³•çš„è¦æ±‚ï¼Œæ‰€ä»¥**ç›¸åŒç±»å‹çš„å­å…ƒç´ éœ€è¦ä¸€ä¸ª key å»å”¯ä¸€çš„æ ‡è¯†å®ƒ**ã€‚å¦‚æœæ²¡æœ‰è¿™ä¸ª keyï¼ŒReact ä¸ä½†ä¼šæŠ¥ä¸€ä¸ª Warningï¼Œå…¶å†…éƒ¨å·¥ä½œæ—¶å¯èƒ½å°±ä¸ä¼šå»åš DOM èŠ‚ç‚¹äº¤æ¢è¿™æ ·çš„æ“ä½œï¼Œè€Œæ˜¯åšä¸€äº›é‡æ–°åˆ›å»ºèŠ‚ç‚¹ç­‰æ€§èƒ½å¼€é”€æ›´å¤§çš„æ“ä½œã€‚æ‰€ä»¥ **key å¹¶ä¸åªæ˜¯ç”¨æ¥æ¶ˆé™¤ warningï¼Œè€Œæ˜¯ä¸€ä¸ªç”¨æ¥æå‡æ€§èƒ½çš„å±æ€§**ã€‚

### 3. è®¾ç½® key çš„å€¼

æˆ‘ä»¬åœ¨è®¾ç½® key æ—¶è¦æ³¨æ„ä»¥ä¸‹å‡ ç‚¹ï¼š

- ä¸€ä¸ªå…ƒç´ çš„ key æœ€å¥½æ˜¯è¿™ä¸ªå…ƒç´ åœ¨åˆ—è¡¨ä¸­æ‹¥æœ‰çš„ä¸€ä¸ªç‹¬ä¸€æ— äºŒçš„å­—ç¬¦ä¸²ã€‚é€šå¸¸ï¼Œæˆ‘ä»¬ä½¿ç”¨æ¥è‡ªæ•°æ®çš„ id æ¥ä½œä¸ºå…ƒç´ çš„ keyã€‚
- å½“å…ƒç´ æ²¡æœ‰ç¡®å®š id çš„æ—¶å€™ï¼Œä¸‡ä¸å¾—å·²ä½ å¯ä»¥ä½¿ç”¨å…ƒç´ ç´¢å¼• index ä½œä¸º keyã€‚(å¦‚æœä¸ä¸ºæ•°ç»„å…ƒç´ æ˜¾å¼çš„æŒ‡å®š key å€¼ï¼Œé‚£ä¹ˆ React å°†é»˜è®¤ä½¿ç”¨ç´¢å¼•ç”¨ä½œä¸ºåˆ—è¡¨é¡¹ç›®çš„ key å€¼ã€‚)
- å¦‚æœåˆ—è¡¨é¡¹ç›®çš„é¡ºåºå¯èƒ½ä¼šå˜åŒ–ï¼Œåˆ™æ›´ä¸å»ºè®®ä½¿ç”¨ç´¢å¼•æ¥ç”¨ä½œ key å€¼ï¼Œå› ä¸ºè¿™æ ·åšä¼šå¯¼è‡´æ€§èƒ½å˜å·®ï¼Œè¿˜å¯èƒ½å¼•èµ·ç»„ä»¶çŠ¶æ€çš„é—®é¢˜ã€‚
- å…ƒç´ çš„ key åªæœ‰æ”¾åœ¨å°±è¿‘çš„æ•°ç»„ä¸Šä¸‹æ–‡ä¸­æ‰æœ‰æ„ä¹‰ã€‚ä¸€ä¸ªå¥½çš„ç»éªŒæ³•åˆ™æ˜¯ï¼šåœ¨ `map()` æ–¹æ³•ä¸­çš„å…ƒç´ éœ€è¦è®¾ç½® key å±æ€§ã€‚
- key ä¸éœ€è¦å…¨å±€å”¯ä¸€ï¼Œåªéœ€è¦åœ¨ä¸€ä¸ªæ•°ç»„å†…ï¼Œå…„å¼ŸèŠ‚ç‚¹ä¹‹é—´åŒºåˆ†å½¼æ­¤æ—¶å”¯ä¸€ä¾¿å¯ã€‚å½“æˆ‘ä»¬ç”Ÿæˆä¸¤ä¸ªä¸åŒçš„æ•°ç»„æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ç›¸åŒçš„ key å€¼ã€‚
- key ä¼šä¼ é€’ä¿¡æ¯ç»™ React åœ¨è¿›è¡Œ Diff è®¡ç®—çš„æ—¶å€™ä½¿ç”¨ï¼Œä½†ä¸ä¼šä¼ é€’ç»™ä½ çš„ç»„ä»¶ã€‚å¦‚æœä½ çš„ç»„ä»¶ä¸­éœ€è¦ä½¿ç”¨ `key` å±æ€§çš„å€¼ï¼Œå¯ä»¥ä½¿ç”¨å…¶ä»–å±æ€§åæ˜¾å¼ä¼ é€’è¿™ä¸ªå€¼ã€‚

[æ·±åº¦è§£æä½¿ç”¨ç´¢å¼•ä½œä¸º key çš„è´Ÿé¢å½±å“](https://medium.com/@robinpokorny/index-as-a-key-is-an-anti-pattern-e0349aece318) ğŸ‘ˆ

[æ·±å…¥è§£æä¸ºä»€ä¹ˆ key æ˜¯å¿…é¡»çš„](https://zh-hans.reactjs.org/docs/reconciliation.html#recursing-on-children) ğŸ‘ˆ

## 8. è¡¨å•

### 1. å—æ§ç»„ä»¶

> åœ¨ HTML ä¸­ï¼Œè¡¨å•å…ƒç´ ï¼ˆå¦‚`<input>`ã€ `<textarea>` å’Œ `<select>`ï¼‰ä¹‹ç±»çš„è¡¨å•å…ƒç´ é€šå¸¸ä¼šè‡ªå·±ä¿å­˜ç»´æŠ¤ä¸€äº›å†…éƒ¨ stateï¼Œå¹¶æ ¹æ®ç”¨æˆ·è¾“å…¥è¿›è¡Œæ›´æ–°ã€‚
>
> è€Œåœ¨ React ä¸­ï¼Œå¯å˜çŠ¶æ€ï¼ˆmutable stateï¼‰é€šå¸¸ä¿å­˜åœ¨ç»„ä»¶çš„ state å±æ€§ä¸­ï¼Œå¹¶ä¸”åªèƒ½é€šè¿‡ä½¿ç”¨ `setState()`æ¥æ›´æ–°ã€‚
>
> æˆ‘ä»¬å¯ä»¥æŠŠä¸¤è€…ç»“åˆèµ·æ¥ï¼Œä½¿ React çš„ state æˆä¸ºâ€œå”¯ä¸€æ•°æ®æºâ€ã€‚æ¸²æŸ“è¡¨å•çš„ React ç»„ä»¶è¿˜æ§åˆ¶ç€ç”¨æˆ·è¾“å…¥è¿‡ç¨‹ä¸­è¡¨å•å‘ç”Ÿçš„æ“ä½œã€‚è¢« React ä»¥è¿™ç§æ–¹å¼æ§åˆ¶å–å€¼çš„è¡¨å•è¾“å…¥å…ƒç´ å°±å«åšâ€œå—æ§ç»„ä»¶â€ã€‚

```jsx
class NameForm extends React.Component {
  constructor(props) {
    super(props);
    this.state = {
      value: ''
    };
    this.handleChange = this.handleChange.bind(this);
    this.handleSubmit = this.handleSubmit.bind(this);
  }

  handleChange(event) {
    this.setState({value: event.target.value});
  }
  handleSubmit(event) {
    alert('æäº¤çš„åå­—: ' + this.state.value);
    event.preventDefault();
  }

  render() {
    return (
      <form onSubmit={this.handleSubmit}>
        <label>
          åå­—:
          <input type="text" value={this.state.value} onChange={this.handleChange} />
        </label>
        <input type="submit" value="æäº¤" />
      </form>
    );
  }
}
```

- é€šè¿‡åœ¨ç»„ä»¶è¾“å…¥å…ƒç´ ä¸Šä½¿ç”¨`value={this.state.value}`ï¼Œä½¿ React çš„`state`æˆä¸ºå”¯ä¸€æ•°æ®æºã€‚
- å¯¹äºå—æ§ç»„ä»¶æ¥è¯´ï¼Œæ¯ä¸ª state çªå˜éƒ½æœ‰ä¸€ä¸ªç›¸å…³çš„å¤„ç†å‡½æ•°ã€‚(`onChange`ã€`onSubmit`)

å¦å¤–ï¼ŒReact ä¸­çš„`textarea`æ ‡ç­¾å’Œ`select`æ ‡ç­¾ä¸ HTML ä¸­çš„ç”¨æ³•è¿˜æœ‰äº›ä¸åŒï¼š

1. ç”¨ `<textarea>` çš„è¡¨å•å’Œä½¿ç”¨å•è¡Œ input çš„è¡¨å•éå¸¸ç±»ä¼¼

```jsx
// html
<textarea>
  ä½ å¥½ï¼Œè¿™æ˜¯ textarea é‡Œçš„æ–‡æœ¬
</textarea>
// react
<textarea value={this.state.value} onChange={this.handleChange} />
```

2. React å¹¶ä¸ä¼šåœ¨`option`æ ‡ç­¾ä¸Šä½¿ç”¨ `selected` å±æ€§ï¼Œè€Œæ˜¯åœ¨æ ¹ `select` æ ‡ç­¾ä¸Šä½¿ç”¨ `value` å±æ€§ï¼Œå°±å¯ä»¥é€‰ä¸­ç›¸åº”çš„é€‰é¡¹ã€‚

```jsx
handleSelectedChange(event) {
    this.setState({selectval: event.target.value});
}
// ...
<select value={this.state.selectval} onChange={this.handleSelectedChange}>
    <option value="A">A</option>
    <option value="B">B</option>
    <option value="C">C</option>
</select>

//æ³¨æ„: ä½ å¯ä»¥å°†æ•°ç»„ä¼ é€’åˆ° value å±æ€§ä¸­ï¼Œä»¥æ”¯æŒåœ¨ select æ ‡ç­¾ä¸­é€‰æ‹©å¤šä¸ªé€‰é¡¹
<select multiple={true} value={['B', 'C']}>
```

### 2. å¤„ç†å¤šä¸ªè¾“å…¥

é€šå¸¸ä¸€ä¸ªè¡¨å•éƒ½æ˜¯éœ€è¦å¤„ç†å¤šä¸ª `input` å…ƒç´ çš„ï¼Œå¦‚æœæˆ‘ä»¬ä¸ºæ¯ä¸€ä¸ªè¾“å…¥éƒ½æ·»åŠ å¤„ç†äº‹ä»¶ï¼Œ é‚£ä¹ˆå°†ä¼šéå¸¸ç¹çã€‚ä¸è¿‡åœ¨ React é‡Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ç»™æ¯ä¸ªå…ƒç´ æ·»åŠ  `name` å±æ€§ï¼Œç„¶åæ ¹æ®`event.target.name`æ¥é€‰æ‹©æ‰§è¡Œç›¸åº”çš„æ“ä½œã€‚ğŸ“

```jsx
class Form extends React.Component {
    constructor (props) {
        super(props);
        this.state = {
            name: '',
            gender: 'ç”·',
            remarks: 'æ— å¤‡æ³¨ä¿¡æ¯'
            protocol: false,
            info: ''
        };
        this.handleInputChange = this.handleInputChange.bind(this);
        this.handleSubmit = this.handleSubmit.bind(this);
    }
    handleInputChange (event) {
        const target = event.target;
        // å…ˆåˆ¤æ–­è¾“å…¥å…ƒç´ ç±»å‹
        const value = target.type==='checkbox' ? target.checked : target.value;
        const name = target.name;
        // ä½¿ç”¨ ES6 è®¡ç®—å±æ€§åç§°çš„è¯­æ³•æ›´æ–°ç»™å®šè¾“å…¥åç§°å¯¹åº”çš„ state å€¼
        this.setState({
            [name]: value
        });
    }
    handleSubmit (event) {
        // setState()ä¼šè‡ªåŠ¨å°†éƒ¨åˆ† state åˆå¹¶åˆ°å½“å‰ state
        this.setState({
            info: `å§“åï¼š${this.state.name}ï¼Œæ€§åˆ«ï¼š${this.state.gender}ï¼Œ${this.state.protocol ? 'åŒæ„' : 'ä¸åŒæ„'}XXåè®®ï¼Œå¤‡æ³¨ï¼š${this.state.remarks}`
        });
        event.preventDefault();
    } 
    render () {
        return (
            <form>
            <p>å§“åï¼š<input name="name" value={this.state.name} onChange={this.handleInputChange} /></p>
            <p>æ€§åˆ«ï¼š
                <select name="gender" value={this.state.gender} onChange={this.handleInputChange}>
                    <option value="ç”·">ç”·</option>
                    <option value="å¥³">å¥³</option>
                </select>
            </p>
            <p>å…¶ä»–å¤‡æ³¨ä¿¡æ¯ï¼š
              <textarea name="remarks" value={this.state.remarks} onChange={this.handleInputChange} />
            </p>
            <p>æ˜¯å¦åŒæ„XXåè®®ï¼š
              <input name="protocol" type="checkbox" onChange={this.handleInputChange} checked={this.state.attend} />
            </p>
            <input type="submit" value="Submit" onClick={this.handleSubmit} />
            </form>
        )
    }
}
```

> åœ¨å—æ§ç»„ä»¶ä¸ŠæŒ‡å®š value çš„å€¼å¯ä»¥é˜²æ­¢ç”¨æˆ·æ›´æ”¹è¾“å…¥ã€‚å¦‚æœæŒ‡å®šäº† `value`ï¼Œä½†è¾“å…¥ä»å¯ç¼–è¾‘ï¼Œåˆ™å¯èƒ½æ˜¯æ„å¤–åœ°å°†`value` è®¾ç½®ä¸º `undefined` æˆ– `null`ã€‚

### 3. éå—æ§ç»„ä»¶

æ€»çš„æ¥è¯´ï¼Œåƒ `<input type="text">`, `<textarea>` å’Œ `<select>` ä¹‹ç±»çš„æ ‡ç­¾éƒ½éå¸¸ç›¸ä¼¼â€”â€”å®ƒä»¬éƒ½æ¥å—ä¸€ä¸ª `value` å±æ€§ï¼Œä½ å¯ä»¥ä½¿ç”¨å®ƒæ¥å®ç°`å—æ§ç»„ä»¶`ã€‚å¤§å¤šæ•°æƒ…å†µä¸‹ä½¿ç”¨å—æ§ç»„ä»¶ä¹Ÿæ˜¯å®ç°è¡¨å•çš„é¦–é€‰æ–¹æ¡ˆã€‚

ä½†æœ‰æ—¶ä½¿ç”¨å—æ§ç»„ä»¶ä¼šå¾ˆéº»çƒ¦ï¼Œå› ä¸ºä½ éœ€è¦ä¸ºæ¯ç§æ•°æ®å˜åŒ–çš„æ–¹å¼éƒ½ç¼–å†™äº‹ä»¶å¤„ç†å‡½æ•°ã€‚ç‰¹åˆ«æ˜¯å½“ä½ å°†ä¹‹å‰çš„ä»£ç åº“è½¬æ¢ä¸º React æˆ–å°† React åº”ç”¨ç¨‹åºä¸é React åº“é›†æˆæ—¶ï¼Œè¿™å¯èƒ½ä¼šä»¤äººåŒçƒ¦ã€‚ åœ¨è¿™äº›æƒ…å†µä¸‹ï¼Œå®ç°è¾“å…¥è¡¨å•çš„å¦ä¸€ç§æ–¹å¼æ˜¯ä½¿ç”¨`éå—æ§ç»„ä»¶`ã€‚

å¦å¤–ï¼Œåœ¨ HTML ä¸­`<input type=â€œfileâ€>` æ ‡ç­¾å…è®¸ç”¨æˆ·ä»å­˜å‚¨è®¾å¤‡ä¸­é€‰æ‹©ä¸€ä¸ªæˆ–å¤šä¸ªæ–‡ä»¶ï¼Œå°†å…¶ä¸Šä¼ åˆ°æœåŠ¡å™¨ï¼Œæˆ–é€šè¿‡ä½¿ç”¨ JavaScript çš„ [File API](https://developer.mozilla.org/zh-CN/docs/Web/API/File/Using_files_from_web_applications) è¿›è¡Œæ“ä½œã€‚å› ä¸ºå®ƒçš„å€¼æ˜¯åªè¯»çš„ï¼Œåªèƒ½ç”±ç”¨æˆ·è®¾ç½®ï¼Œè€Œä¸èƒ½é€šè¿‡ä»£ç æ§åˆ¶ã€‚æ‰€ä»¥åœ¨ React ä¸­ï¼Œ`<input type="file" />` å§‹ç»ˆæ˜¯ä¸€ä¸ªéå—æ§ç»„ä»¶ï¼Œä¸”åº”è¯¥ä½¿ç”¨ File API ä¸æ–‡ä»¶è¿›è¡Œäº¤äº’ã€‚

åœ¨å—æ§ç»„ä»¶ä¸­ï¼Œè¡¨å•æ•°æ®æ˜¯ç”± React ç»„ä»¶å¤„ç†çš„ã€‚è€Œä½¿ç”¨éå—æ§ç»„ä»¶æ—¶ï¼Œè¡¨å•æ•°æ®å°†äº¤ç”± DOM èŠ‚ç‚¹æ¥å¤„ç†ã€‚åœ¨ React ä¸­ï¼Œ [ä½¿ç”¨ ref](https://zh-hans.reactjs.org/docs/refs-and-the-dom.html) å³å¯ä»£æ›¿åŸæ¥çš„`e.target.value`ï¼Œå®ç°ä» DOM èŠ‚ç‚¹ä¸­è·å–è¡¨å•æ•°æ®ã€‚

```jsx
<input type="text" defaultValue="nickname" ref={input => this.input = input} />
//åœ¨ç»„ä»¶ä¸­ä½¿ç”¨ this.input.value å–åˆ°è¡¨å•æ•°æ®
```

- åœ¨ JSX ä¸­ä½¿ç”¨ ref æ—¶æœ€å¥½ä½¿ç”¨ ES6 è¯­æ³•ä¸­çš„ç®­å¤´å‡½æ•°ï¼Œè¿™æ ·å¯ä»¥ç®€æ´æ˜äº†çš„ç»‘å®šDOMå…ƒç´ ã€‚
- è¦æŒ‡å®šé»˜è®¤å€¼ï¼Œé‚£ä¹ˆå¯ä»¥ä½¿ç”¨`defaultValue`ï¼Œç›¸åº”çš„ï¼Œ`type="checkbox"`å’Œ`type="radio"`ï¼Œåˆ™ä½¿ç”¨`defaultChecked`ã€‚
- ä¸å»ºè®®ç”¨`ref`è¿™æ ·æ“ä½œçš„ï¼Œå› ä¸º`React`çš„æ˜¯æ•°æ®é©±åŠ¨çš„ï¼Œæ‰€ä»¥ç”¨refä¼šå‡ºç°å„ç§é—®é¢˜ã€‚

å…³äº Refs çš„è¯¦ç»†ä¿¡æ¯ï¼š[Refs API](https://zh-hans.reactjs.org/docs/refs-and-the-dom.html) ğŸ‘ˆ

## 9. çŠ¶æ€æå‡

åœ¨ React åº”ç”¨ä¸­ï¼Œä»»ä½•å¯å˜æ•°æ®åº”å½“åªæœ‰ä¸€ä¸ªç›¸å¯¹åº”çš„å”¯ä¸€â€œæ•°æ®æºâ€ã€‚é€šå¸¸ï¼Œstate éƒ½æ˜¯é¦–å…ˆæ·»åŠ åˆ°éœ€è¦æ¸²æŸ“æ•°æ®çš„ç»„ä»¶ä¸­å»ã€‚å¦‚æœå…¶ä»–ç»„ä»¶ä¹Ÿéœ€è¦è¿™ä¸ª stateï¼Œé‚£ä¹ˆä½ å¯ä»¥å°†å®ƒæå‡è‡³è¿™äº›ç»„ä»¶çš„æœ€è¿‘å…±åŒçˆ¶ç»„ä»¶ä¸­ï¼Œç„¶åé€šè¿‡å±æ€§ï¼ˆpropsï¼‰ä¼ é€’ç»™å­ç»„ä»¶ã€‚å³ï¼š**åº”å½“ä¾é [è‡ªä¸Šè€Œä¸‹çš„å•å‘æ•°æ®æµ](#_2-å•å‘æ•°æ®æµ)ï¼Œè€Œä¸æ˜¯å°è¯•åœ¨ä¸åŒç»„ä»¶é—´åŒæ­¥ stateã€‚**

ğŸŒ¡æŸ¥çœ‹å®˜ç½‘çš„[æ¸©åº¦è®¡ç®—å™¨demo](https://react.docschina.org/docs/lifting-state-up.html#lifting-state-up) ğŸ‘ˆ

> è™½ç„¶æå‡ state æ–¹å¼æ¯”åŒå‘ç»‘å®šæ–¹å¼éœ€è¦ç¼–å†™æ›´å¤šçš„â€œæ ·æ¿â€ä»£ç ï¼Œä½†å¸¦æ¥çš„å¥½å¤„æ˜¯ï¼Œæ’æŸ¥å’Œéš”ç¦» bug æ‰€éœ€çš„å·¥ä½œé‡å°†ä¼šå˜å°‘ã€‚ç”±äºâ€œå­˜åœ¨â€äºç»„ä»¶ä¸­çš„ä»»ä½• stateï¼Œä»…æœ‰ç»„ä»¶è‡ªå·±èƒ½å¤Ÿä¿®æ”¹å®ƒï¼Œå› æ­¤ bug çš„æ’æŸ¥èŒƒå›´è¢«å¤§å¤§ç¼©å‡äº†ã€‚

```jsx
function FancyBorder(props) {
  return (
    <div className={'FancyBorder FancyBorder-' + props.color}>
      {props.children}
    </div>
  );
}
```

